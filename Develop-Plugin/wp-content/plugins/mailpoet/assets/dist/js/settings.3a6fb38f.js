"use strict";(self.webpackChunkMailPoet3=self.webpackChunkMailPoet3||[]).push([[571],{11217:function(e,t,s){var i={};s.r(i),s.d(i,{loadSettings:function(){return x},openWoocommerceCustomizer:function(){return C},recalculateSubscribersScore:function(){return E},reinstall:function(){return N},saveSettings:function(){return _},sendCongratulatoryMssEmail:function(){return k},sendTestEmail:function(){return T},setErrorFlag:function(){return h},setReEngagement:function(){return g},setSetting:function(){return u},setSettings:function(){return p},updateKeyActivationState:function(){return d},verifyMssKey:function(){return I},verifyPremiumKey:function(){return S}});var n={};s.r(n),s.d(n,{getAmazonSesOptions:function(){return X},getDefaultSegments:function(){return B},getKeyActivationState:function(){return $},getPages:function(){return W},getPaths:function(){return q},getReEngagementAction:function(){return ee},getSavingError:function(){return R},getSegments:function(){return Y},getSendGridOptions:function(){return J},getSetting:function(){return L},getSettings:function(){return F},getTestEmailState:function(){return Z},getWebHosts:function(){return H},hasErrorFlag:function(){return D},hasMembersPlugin:function(){return O},hasReEngagementNotice:function(){return Q},hasSavingError:function(){return V},hasWooCommerce:function(){return z},isBuiltInCaptchaSupported:function(){return U},isMssActive:function(){return K},isNewUser:function(){return G},isSaving:function(){return P}});var a={};s.r(a),s.d(a,{CALL_API:function(){return te.t},TRACK_REINSTALLED:function(){return ie},TRACK_SETTINGS_SAVED:function(){return se},TRACK_TEST_EMAIL_SENT:function(){return ne},TRACK_UNAUTHORIZED_EMAIL:function(){return ae}}),s(7295);var r=s(52524),o=s.n(r),l=s(71304),c=s(61299);const m="mailpoet-settings";function d(e){return{type:"UPDATE_KEY_ACTIVATION_STATE",fields:e}}function u(e,t){return{type:"SET_SETTING",path:e,value:t}}function p(e){return{type:"SET_SETTINGS",value:e}}function h(e){return{type:"SET_ERROR_FLAG",value:e}}function g(e){return{type:"SET_RE_ENGAGEMENT_NOTICE",value:e}}function*_(){yield{type:"SAVE_STARTED"};const e=(0,c.Ys)(m).getSettings(),t=JSON.stringify(e),s=JSON.parse(t,((e,t)=>"string"==typeof t?t.trim():t)),{success:i,error:n,res:a}=yield{type:"CALL_API",endpoint:"settings",action:"set",data:s};return i?(yield{type:"TRACK_SETTINGS_SAVED"},yield d({congratulatoryMssEmailSentTo:null,fromAddressModalCanBeShown:!1}),yield p(a.data),yield g(a.meta),yield{type:"TRACK_UNAUTHORIZED_EMAIL",meta:a.meta},{type:"SAVE_DONE"}):{type:"SAVE_FAILED",error:n}}function*x(){const{success:e,error:t,res:s}=yield{type:"CALL_API",endpoint:"settings",action:"get"};return e?p(s.data):{type:"SAVE_FAILED",error:t}}var j=s(57790);let b,v,f,y;function*I(e){const{success:t,error:s,res:i}=yield{type:"CALL_API",endpoint:"services",action:"checkMSSKey",data:{key:e}};if(!t)return d({mssStatus:v.INVALID,mssMessage:s.join(" ")||null});const n={mssMessage:i.data.message||null},a=(0,c.Ys)(m).getSettings();a.mta_group="mailpoet",a.mta={...a.mta,method:"MailPoet",mailpoet_api_key:e},a.signup_confirmation.enabled="1";const r=yield{type:"CALL_API",endpoint:"settings",action:"set",data:a};return r.success?(yield p(r.res.data),n.mssStatus=v.VALID_MSS_ACTIVE):n.mssStatus=v.VALID_MSS_NOT_ACTIVE,d(n)}function*S(e){var t,s,i;const{res:n,success:a,error:r}=yield{type:"CALL_API",endpoint:"services",action:"checkPremiumKey",data:{key:e}};var o;if(!a)return j.x.trackEvent("User has failed to validate a Premium key",{"Premium plugin is active":!!j.x.premiumVersion}),d({premiumStatus:b.INVALID,premiumMessage:r.join(" ")||null,code:null==n||null===(o=n.meta)||void 0===o?void 0:o.code});yield u(["premium","premium_key"],e);const l=n.meta.premium_plugin_active;let c=n.meta.premium_plugin_installed?b.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:b.VALID_PREMIUM_PLUGIN_NOT_INSTALLED;return l&&(c=b.VALID_PREMIUM_PLUGIN_ACTIVE),yield d({premiumMessage:null,premiumStatus:c,code:null==n||null===(t=n.meta)||void 0===t?void 0:t.code,downloadUrl:null==n||null===(s=n.meta)||void 0===s||null===(i=s.premium_plugin_info)||void 0===i?void 0:i.download_link}),j.x.trackEvent("User has validated a Premium key"),null}function*k(){const e=yield{type:"CALL_API",endpoint:"services",action:"sendCongratulatoryMssEmail"};return e&&e.success?d({congratulatoryMssEmailSentTo:e.res.data.email_address}):null}function*N(){j.x.Modal.loading(!0);const{success:e,error:t}=yield{type:"CALL_API",endpoint:"setup",action:"reset"};return j.x.Modal.loading(!1),e?(yield{type:"TRACK_REINSTALLED"},{type:"SAVE_DONE"}):{type:"SAVE_FAILED",error:t}}function*E(){return j.x.Modal.loading(!0),yield{type:"CALL_API",endpoint:"settings",action:"recalculateSubscribersScore"},j.x.Modal.loading(!1),{type:"SAVE_DONE"}}!function(e){e[e.INVALID=0]="INVALID",e[e.VALID_PREMIUM_PLUGIN_NOT_INSTALLED=1]="VALID_PREMIUM_PLUGIN_NOT_INSTALLED",e[e.VALID_PREMIUM_PLUGIN_NOT_ACTIVE=2]="VALID_PREMIUM_PLUGIN_NOT_ACTIVE",e[e.VALID_PREMIUM_PLUGIN_ACTIVE=3]="VALID_PREMIUM_PLUGIN_ACTIVE",e[e.VALID_PREMIUM_PLUGIN_BEING_INSTALLED=4]="VALID_PREMIUM_PLUGIN_BEING_INSTALLED",e[e.VALID_PREMIUM_PLUGIN_BEING_ACTIVATED=5]="VALID_PREMIUM_PLUGIN_BEING_ACTIVATED"}(b||(b={})),function(e){e[e.INVALID=0]="INVALID",e[e.VALID_MSS_NOT_ACTIVE=1]="VALID_MSS_NOT_ACTIVE",e[e.VALID_MSS_ACTIVE=2]="VALID_MSS_ACTIVE"}(v||(v={})),function(e){e[e.INSTALL_INSTALLING=0]="INSTALL_INSTALLING",e[e.INSTALL_ACTIVATING=1]="INSTALL_ACTIVATING",e[e.INSTALL_DONE=2]="INSTALL_DONE",e[e.INSTALL_INSTALLING_ERROR=3]="INSTALL_INSTALLING_ERROR",e[e.INSTALL_ACTIVATING_ERROR=4]="INSTALL_ACTIVATING_ERROR",e[e.ACTIVATE_ACTIVATING=5]="ACTIVATE_ACTIVATING",e[e.ACTIVATE_DONE=6]="ACTIVATE_DONE",e[e.ACTIVATE_ERROR=7]="ACTIVATE_ERROR"}(f||(f={})),function(e){e[e.SENDING=0]="SENDING",e[e.NONE=1]="NONE",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(y||(y={}));var A=s(68041);function*T(e,t){if(!e)return{type:"TEST_EMAIL_FAILED",error:[(0,A.t)("cantSendEmail")]};yield{type:"START_TEST_EMAIL_SENDING"};const s=yield{type:"CALL_API",endpoint:"mailer",action:"send",data:{mailer:t,newsletter:{subject:(0,A.t)("testEmailSubject"),body:{html:`<p>${(0,A.t)("testEmailBody")}</p>`,text:(0,A.t)("testEmailBody")}},subscriber:e}};return yield{type:"TRACK_TEST_EMAIL_SENT",success:s.success,method:t.method},s.success?{type:"TEST_EMAIL_SUCCESS"}:{type:"TEST_EMAIL_FAILED",error:s.error}}function*C(e){let t=e;if(!t){const{res:e,success:s,error:i}=yield{type:"CALL_API",endpoint:"settings",action:"set",data:{"woocommerce.use_mailpoet_editor":1}};if(!s)return{type:"SAVE_FAILED",error:i};t=e.data.woocommerce.transactional_email_id}return window.location.href=`?page=mailpoet-newsletter-editor&id=${t}`,null}var w=s(96486),M=s.n(w);function L(e,t){return M().get(e.data,t)}function F(e){return e.data}function P(e){return e.save.inProgress}function D(e){return e.flags.error}function V(e){return null!==e.save.error}function R(e){return e.save.error}function z(e){return e.flags.woocommerce}function O(e){return e.flags.membersPlugin}function U(e){return e.flags.builtInCaptcha}function G(e){return e.flags.newUser}function K(e){return"MailPoet"===M().get(e,"data.mta.method")}function Y(e){return e.segments}function B(e){return e.segments.filter((e=>"default"===e.type))}function W(e){return e.pages}function $(e){return e.keyActivation}function q(e){return e.paths}function H(e){return{...e.hosts.web,manual:{name:(0,A.t)("notListed"),emails:25,interval:5}}}function X(e){return e.hosts.smtp.AmazonSES}function J(e){return e.hosts.smtp.SendGrid}function Z(e){return e.testEmail}function Q(e){return e.reEngagement.showNotice}function ee(e){return e.reEngagement.action}var te=s(25643);function se(){const e=(0,c.Ys)(m).getSettings(),t={"Sending method type":e.mta_group||null,"Sending frequency (emails)":"mailpoet"!==e.mta_group&&e.mta&&e.mta.frequency&&e.mta.frequency.emails,"Sending frequency (interval)":"mailpoet"!==e.mta_group&&e.mta&&e.mta.frequency&&e.mta.frequency.interval,"Sending provider":"smtp"===e.mta_group&&e.smtp_provider,"Sign-up confirmation enabled":e.signup_confirmation&&e.signup_confirmation.enabled,"Bounce email is present":e.bounce&&""!==e.bounce.address,"Newsletter task scheduler method":e.cron_trigger&&e.cron_trigger.method};j.x.isWoocommerceActive&&(t["WooCommerce email customizer enabled"]=e.woocommerce&&e.woocommerce.use_mailpoet_editor),j.x.trackEvent("User has saved Settings",t)}function ie(){j.x.trackEvent("User has reinstalled MailPoet via Settings")}function ne(e){j.x.trackEvent("User has sent a test email from Settings",{"Sending was successful":!!e.success,"Sending method type":e.method})}function ae(e){void 0!==e.meta&&e.meta.invalid_sender_address&&j.x.trackEvent("Unauthorized email used",{"Unauthorized email source":"settings"})}function re(e){return t=>void 0===t?e:t?`${t}`:""}function oe(e,t,s){return i=>void 0===i?s:i===e||i===t?i:i?e:t}function le(e,t){return s=>e.includes(s)?s:t}function ce(e){return t=>Object.keys(e).reduce(((s,i)=>({[i]:e[i](t?t[i]:void 0),...s})),{})}function me(e){return e}function de(e){const t=re(""),s=oe("1","0","0"),i=oe("1","0","1"),n=oe("1","",""),a=oe("1","","1"),r=(o=[],e=>M().isArray(e)?e.map(re("")):o);var o;const l=le(["server","manual","AmazonSES","SendGrid"],"server");return ce({sender:ce({name:t,address:t}),reply_to:ce({name:t,address:t}),bounce:ce({address:t}),subscribe:ce({on_comment:ce({enabled:s,label:re((0,A.t)("yesAddMe")),segments:r}),on_register:ce({enabled:s,label:re((0,A.t)("yesAddMe")),segments:r})}),subscription:ce({pages:ce({manage:t,unsubscribe:t,confirmation:t,captcha:t,confirm_unsubscribe:t}),segments:r}),stats_notifications:ce({enabled:i,automated:i,address:t}),subscriber_email_notification:ce({enabled:a,address:t}),reEngagement:ce({page:t}),cron_trigger:ce({method:le(["WordPress","MailPoet","Linux Cron"],"WordPress")}),tracking:ce({level:le(["full","partial","basic"],"full")}),send_transactional_emails:n,deactivate_subscriber_after_inactive_days:le(["","90","180","365","540"],"365"),analytics:ce({enabled:n}),"3rd_party_libs":ce({enabled:n}),captcha:ce({type:le(["","built-in","recaptcha","recaptcha-invisible"],"built-in"),recaptcha_site_token:t,recaptcha_secret_token:t,recaptcha_invisible_site_token:t,recaptcha_invisible_secret_token:t}),logging:le(["everything","errors","nothing"],"errors"),mta_group:le(["mailpoet","website","smtp"],"website"),mta:ce({method:le(["MailPoet","AmazonSES","SendGrid","PHPMail","SMTP"],"PHPMail"),frequency:ce({emails:re("25"),interval:re("5")}),mailpoet_api_key:t,host:t,port:t,region:re("us-east-1"),access_key:t,secret_key:t,api_key:t,login:t,password:t,encryption:t,authentication:le(["1","-1"],"1"),mailpoet_api_key_state:ce({state:le(["valid","invalid","expiring","already_used","check_error"],"check_error"),data:me})}),mailpoet_smtp_provider:l,smtp_provider:l,web_host:re("manual"),mailpoet_sending_frequency:le(["auto","manual"],"manual"),signup_confirmation:ce({enabled:a,subject:t,body:t}),woocommerce:ce({use_mailpoet_editor:n,transactional_email_id:t,optin_on_checkout:ce({enabled:a,segments:r,message:t}),accept_cookie_revenue_tracking:ce({set:a})}),mailpoet_subscribe_old_woocommerce_customers:ce({enabled:a}),premium:ce({premium_key:t,premium_key_state:ce({state:le(["valid","invalid","expiring","already_used","check_error"],"check_error"),data:me})}),authorized_emails_addresses_check:me})(e)}function ue(e){let t;return function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case"SET_SETTING":return(0,w.setWith)((0,w.clone)(s),["data",...i.path],i.value,w.clone);case"SET_SETTINGS":return{...s,data:de(i.value)};case"SET_ERROR_FLAG":return{...s,flags:{...s.flags,error:!!i.value}};case"SAVE_STARTED":return{...s,save:{inProgress:!0,error:null}};case"SAVE_DONE":return{...s,save:{inProgress:!1,error:null}};case"SAVE_FAILED":return{...s,save:{inProgress:!1,error:i.error}};case"SET_RE_ENGAGEMENT_NOTICE":return{...s,reEngagement:{showNotice:i.value.showNotice,action:i.value.action}};case"UPDATE_KEY_ACTIVATION_STATE":return t={...s.keyActivation,...i.fields},t.isKeyValid=null,null!==t.mssStatus&&null!==t.premiumStatus&&(t.isKeyValid=t.mssStatus!==v.INVALID||t.premiumStatus!==b.INVALID),{...s,keyActivation:t};case"START_TEST_EMAIL_SENDING":return{...s,testEmail:{state:y.SENDING,error:null}};case"TEST_EMAIL_SUCCESS":return{...s,testEmail:{state:y.SUCCESS,error:null}};case"TEST_EMAIL_FAILED":return{...s,testEmail:{state:y.FAILURE,error:i.error}};default:return s}}}function pe(e){const t=e.mailpoet_pages,s=e.mailpoet_paths,i=e.mailpoet_segments,n=e.mailpoet_hosts,a=de(e.mailpoet_settings),r={error:!1,newUser:!!e.mailpoet_is_new_user,woocommerce:!!e.mailpoet_woocommerce_active,membersPlugin:!!e.mailpoet_members_plugin_active,builtInCaptcha:e.mailpoet_built_in_captcha_supported};let o=null,l=null,c=null;return(a.premium.premium_key||a.mta.mailpoet_api_key)&&(l=function(e,t){return e?"MailPoet"===t.mta.method?v.VALID_MSS_ACTIVE:v.VALID_MSS_NOT_ACTIVE:v.INVALID}(e.mailpoet_mss_key_valid,a),c=function(e,t){const s=!!j.x.premiumVersion;return e?s?b.VALID_PREMIUM_PLUGIN_ACTIVE:t?b.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:b.VALID_PREMIUM_PLUGIN_NOT_INSTALLED:b.INVALID}(e.mailpoet_premium_key_valid,e.mailpoet_premium_plugin_installed),o=l!==v.INVALID||c!==b.INVALID),{data:a,flags:r,save:{inProgress:!1,error:null},keyActivation:{isKeyValid:o,mssStatus:l,premiumStatus:c,mssMessage:null,premiumMessage:null,fromAddressModalCanBeShown:!1,premiumInstallationStatus:null,key:a.premium.premium_key||a.mta.mailpoet_api_key,inProgress:!1,congratulatoryMssEmailSentTo:null,downloadUrl:e.mailpoet_premium_plugin_download_url,activationUrl:e.mailpoet_premium_plugin_activation_url},segments:i,pages:t,paths:s,hosts:n,testEmail:{state:y.NONE,error:null},reEngagement:{showNotice:!1,action:null}}}var he=s(93726),ge=s(5830),_e=s(48228),xe=s(53681),je=s(99181),be=s(15451);function ve(e){let{title:t,description:s,htmlFor:i}=e;return(0,be.jsxs)("div",{className:"mailpoet-settings-label",children:[(0,be.jsx)("label",{className:"mailpoet-settings-label-title",htmlFor:i,children:t}),s&&(0,be.jsx)("p",{className:"description",children:s})]})}function fe(e){let{children:t}=e;return(0,be.jsx)("div",{className:"mailpoet-settings-inputs",children:t})}var ye=s(45993),Ie=s(57744),Se=s(41882);function ke(e){return(0,Se.Z)(m)[e]}var Ne=s(94878);function Ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,Ne.Z)((t=>{const s=t(m);return s[e].bind(s)}),t)}function Ae(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];const i=Ee("getSetting"),n=ke("setSetting");return[i(t),(0,ye.useCallback)((e=>n(t,e)),t)]}var Te=s(27273),Ce=s.n(Te);function we(){const[e,t]=(0,ye.useState)(!1),s=Ee("isSaving")(),i=Ee("hasErrorFlag")(),n=Ee("getSavingError")(),a=Ee("hasReEngagementNotice")(),r=Ee("getReEngagementAction")(),o=ke("saveSettings"),{notices:c}=(0,ye.useContext)(l.k),m=c.error,d=c.success;return(0,ye.useEffect)((()=>{e&&!s&&(n?m(n.map((e=>(0,be.jsx)("p",{children:e}))),{scroll:!0}):(d((0,be.jsx)("p",{children:j.x.I18n.t("settingsSaved")}),{scroll:!0}),a&&((e,t,s)=>{if("deactivate"!==e){if("reactivate"===e){const e=Ce()(j.x.I18n.t("re-engagementReactivatedNotice"),/\[link\](.*?)\[\/link\]/g,(e=>(0,be.jsx)("a",{href:"?page=mailpoet-newsletters#/re_engagement",rel:"noopener noreferrer",children:e},"reEngagementEmailsTabLink")));s((0,be.jsx)("p",{children:e}),{scroll:!0})}}else t((0,be.jsx)("p",{children:j.x.I18n.t("re-engagementDisabledNotice")}),{scroll:!0})})(r,m,d)))}),[e,n,s,m,d,a,r]),(0,be.jsx)("div",{className:"mailpoet-settings-save",children:(0,be.jsx)(Ie.z,{type:"button",automationId:"settings-submit-button",isDisabled:s||i,onClick:()=>{t(!0),o()},children:j.x.I18n.t("saveSettings")})})}var Me=s(1030);function Le(e){const t=Ee(e.segmentsSelector?e.segmentsSelector:"getDefaultSegments")().map((e=>({value:e.id,label:e.name,count:e.subscribers}))),s=t.filter((t=>e.value.includes(t.value)));return(0,be.jsx)(Me.J,{isMulti:!0,defaultValue:s,id:e.id,placeholder:e.placeholder,options:t,onChange:t=>{e.setValue((t||[]).map((e=>e.value)))}})}var Fe=s(2141);function Pe(e){const t=Ee("getPages")();let s=t.find((t=>t.id===parseInt(e.value,10)));return s||(s=t[0]),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered",children:[(0,be.jsx)(Fe.P,{id:e.id,automationId:e.automationId,value:s.id,onChange:(0,A.z2)(e.setValue),isMinWidth:!0,dimension:"small",children:t.map((e=>(0,be.jsx)("option",{value:e.id,children:`${e.title}`},e.id)))}),(0,be.jsx)("span",{className:"mailpoet-gap"}),(0,be.jsx)("a",{className:"mailpoet-link",target:"_blank",title:(0,A.t)("previewPage"),rel:"noopener noreferrer",href:s.url[e.preview],"data-automation-id":e.linkAutomationId,children:(0,A.t)("preview")})]})}var De=s(60017),Ve=s(43246);function Re(){const e=Ee("isMssActive")(),[t,s]=Ae("sender","name"),[i,n]=Ae("sender","address"),[a,r]=Ae("reply_to","name"),[o,l]=Ae("reply_to","address"),c=ke("setErrorFlag"),m=i&&!(0,A.Jh)(i),d=o&&!(0,A.Jh)(o);return(0,ye.useEffect)((()=>{c(m||d)}),[d,m,c]),(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("defaultSenderTitle"),description:(0,A.t)("defaultSenderDescription"),htmlFor:"sender-name"}),(0,be.jsxs)(fe,{children:[(0,be.jsx)("label",{htmlFor:"sender-name",children:(0,A.t)("from")}),(0,be.jsx)("br",{}),(0,be.jsx)(De.I,{dimension:"small",type:"text",id:"sender-name",placeholder:(0,A.t)("yourName"),"data-automation-id":"from-name-field",value:t,onChange:(0,A.z2)(s)}),(0,be.jsx)("br",{}),(0,be.jsx)(De.I,{dimension:"small",type:"text",placeholder:"from@mydomain.com","data-automation-id":"from-email-field",value:i,onChange:(0,A.z2)((0,A.pz)(n))}),(0,be.jsx)("br",{}),m&&(0,be.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,A.t)("invalidEmail")}),(0,be.jsx)("div",{className:"regular-text",children:(0,be.jsx)(Ve.L,{emailAddress:i,mssActive:e})}),(0,be.jsx)("label",{className:"mailpoet-settings-inputs-row",htmlFor:"reply_to-name",children:"Reply-to"}),(0,be.jsx)(De.I,{dimension:"small",type:"text",id:"reply_to-name",placeholder:(0,A.t)("yourName"),"data-automation-id":"reply_to-name-field",value:a,onChange:(0,A.z2)(r)}),(0,be.jsx)("br",{}),(0,be.jsx)(De.I,{dimension:"small",type:"text",placeholder:"reply_to@mydomain.com","data-automation-id":"reply_to-email-field",value:o,onChange:(0,A.z2)((0,A.pz)(l))}),(0,be.jsx)("br",{}),d&&(0,be.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,A.t)("invalidEmail")})]})]})}var ze=s(16277);function Oe(e){let{title:t,description:s,event:i}=e;const[n,a]=Ae("subscribe",i,"enabled"),[r,o]=Ae("subscribe",i,"label"),[l,c]=Ae("subscribe",i,"segments");return(0,ye.useEffect)((()=>{""===r&&o((0,A.t)("yesAddMe"))}),[r,o]),(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:t,description:s,htmlFor:`subscribe-${i}-enabled`}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(ze.X,{id:`subscribe-${i}-enabled`,automationId:`subscribe-${i}-checkbox`,checked:"1"===n,onCheck:e=>a(e?"1":"0")}),"1"===n&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("br",{}),(0,be.jsx)(De.I,{dimension:"small",type:"text",value:r,onChange:(0,A.z2)(o)}),(0,be.jsx)("label",{className:"mailpoet-settings-inputs-row",htmlFor:`subscribe-${i}-segments`,children:(0,A.t)("usersWillBeSubscribedTo")}),(0,be.jsx)("div",{"data-automation-id":`subscribe-${i}-segments-selection`,children:(0,be.jsx)(Le,{id:`subscribe-${i}-segments`,placeholder:(0,A.t)("chooseList"),value:l,setValue:c})})]})]})]})}function Ue(){const[e,t]=Ae("subscription","pages","manage"),[s,i]=Ae("subscription","segments");return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("manageSubTitle"),description:(0,be.jsxs)(be.Fragment,{children:[(0,A.t)("manageSubDescription1")," ",Ce()((0,A.t)("manageSubDescription2"),/\[link\](.*?)\[\/link\]/,(e=>(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/222-customize-your-manage-subscription-page",rel:"noopener noreferrer","data-beacon-article":"59ddd0bb2c7d3a40f0ed5b57",target:"_blank",children:e},e)))]}),htmlFor:"subscription-manage-page"}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(Pe,{value:e,preview:"manage",setValue:t,id:"subscription-manage-page",automationId:"subscription-manage-page-selection",linkAutomationId:"preview_manage_subscription_page_link"}),(0,be.jsx)("label",{className:"mailpoet-settings-inputs-row",htmlFor:"subscription-segments",children:(0,A.t)("subscribersCanChooseFrom")}),(0,be.jsx)(Le,{id:"subscription-segments",value:s,setValue:i,placeholder:(0,A.t)("leaveEmptyToDisplayAll")})]})]})}function Ge(){const[e,t]=Ae("subscription","pages","unsubscribe"),[s,i]=Ae("subscription","pages","confirm_unsubscribe");return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("unsubscribeTitle"),description:(0,be.jsxs)(be.Fragment,{children:[Ce()((0,A.t)("unsubscribeDescription1"),"[mailpoet_page]",(()=>(0,be.jsx)("code",{children:"[mailpoet_page]"},"mp")))," ",Ce()((0,A.t)("unsubscribeDescription2"),/\[link\](.*?)\[\/link\]/,(e=>(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/221-customize-your-unsubscribe-page",rel:"noopener noreferrer","data-beacon-article":"59dcea10042863379ddc8b4d",target:"_blank",children:e},e)))]}),htmlFor:"subscription-pages-unsubscribe"}),(0,be.jsxs)(fe,{children:[(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,A.t)("confirmationPageTitle"),":"]}),(0,be.jsx)(Pe,{value:s,preview:"confirm_unsubscribe",setValue:i,id:"subscription-pages-unsubscribe-confirmation",automationId:"unsubscribe-confirmation-page-selection",linkAutomationId:"unsubscribe_page_preview_link_confirmation"}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,A.t)("successPageTitle"),":"]}),(0,be.jsx)(Pe,{value:e,preview:"unsubscribe",setValue:t,id:"subscription-pages-unsubscribe",automationId:"unsubscribe-success-page-selection",linkAutomationId:"unsubscribe_page_preview_link"})]})]})}function Ke(){const[e,t]=Ae("stats_notifications","enabled"),[s,i]=Ae("stats_notifications","automated"),[n,a]=Ae("stats_notifications","address"),r=ke("setErrorFlag"),o=("1"===e||"1"===s)&&""===n.trim(),l=n&&!(0,A.Jh)(n);return(0,ye.useEffect)((()=>{r(o||l)}),[o,l,r]),(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("statsNotifsTitle"),description:(0,A.t)("statsNotifsDescription"),htmlFor:"stats-enabled"}),(0,be.jsxs)(fe,{children:[(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(ze.X,{id:"stats-enabled",checked:"1"===e,onCheck:e=>t(e?"1":"0")}),(0,be.jsx)("label",{htmlFor:"stats-enabled",children:(0,A.t)("newslettersAndPostNotifs")})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(ze.X,{id:"stats-automated",checked:"1"===s,onCheck:e=>i(e?"1":"0")}),(0,be.jsx)("label",{htmlFor:"stats-automated",children:(0,A.t)("welcomeAndWcEmails")})]}),(0,be.jsx)(De.I,{dimension:"small",type:"email",value:n,onChange:(0,A.z2)((0,A.pz)(a)),placeholder:"me@mydomain.com"}),o&&(0,be.jsx)("div",{className:"mailpoet_error_item mailpoet_error",children:(0,A.t)("pleaseFillEmail")}),l&&(0,be.jsx)("div",{className:"mailpoet_error_item mailpoet_error",children:(0,A.t)("invalidEmail")})]})]})}var Ye=s(84868);function Be(){const[e,t]=Ae("subscriber_email_notification","enabled"),[s,i]=Ae("subscriber_email_notification","address"),n=ke("setErrorFlag"),a="1"===e&&""===s.trim(),r=s&&!(0,A.Jh)(s);return(0,ye.useEffect)((()=>{n(a||r)}),[a,r,n]),(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("newSubscriberNotifsTitle"),description:(0,A.t)("newSubscriberNotifsDescription"),htmlFor:"subscriber_email_notification-enabled"}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(Ye.Y,{checked:"1"===e,value:"1",onCheck:t}),(0,A.t)("yes")," ",(0,be.jsx)(Ye.Y,{checked:""===e,value:"",onCheck:t}),(0,A.t)("no"),(0,be.jsx)("br",{}),(0,be.jsx)(De.I,{dimension:"small",type:"email",value:s,onChange:(0,A.z2)((0,A.pz)(i)),placeholder:"me@mydomain.com"}),a&&(0,be.jsx)("div",{className:"mailpoet_error_item mailpoet_error",children:(0,A.t)("pleaseFillEmail")}),r&&(0,be.jsx)("div",{className:"mailpoet_error_item mailpoet_error",children:(0,A.t)("invalidEmail")})]})]})}function We(e){let{name:t,title:s,description:i}=e;const[n,a]=(0,ye.useState)([]),r=`[${t}${n.length?` segments="${n.join(",")}"`:""}]`;return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:s,description:i,htmlFor:`${t}-shortcode`}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(De.I,{dimension:"small",readOnly:!0,type:"text",value:r,onClick:e=>{e.target.focus(),e.target.select()},id:`${t}-shortcode`}),(0,be.jsx)("br",{}),(0,be.jsx)(Le,{value:n,setValue:a,id:`${t}-shortcode-segments`,placeholder:(0,A.t)("leaveEmptyToDisplayAll"),segmentsSelector:"getSegments"})]})]})}function $e(){return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("gdprTitle"),description:(0,A.t)("gdprDescription"),htmlFor:"gdpr-compliant"}),(0,be.jsx)(fe,{children:(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/246-guide-to-conform-to-gdpr","data-beacon-article":"5a9e8cdd04286374f7089a8c",title:(0,A.t)("readGuide"),target:"_blank",rel:"noopener noreferrer",children:(0,A.t)("readGuide")})})]})}function qe(){const[e,t]=Ae("reEngagement","page");return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("reEngagementTitle"),description:(0,A.t)("reEngagementDescription"),htmlFor:"re-engagement-page"}),(0,be.jsx)(fe,{children:(0,be.jsx)(Pe,{value:e,preview:"re_engagement",setValue:t,id:"re-engagement-page"})})]})}function He(){return(0,be.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,be.jsx)(Re,{}),(0,be.jsx)(Oe,{event:"on_comment",title:(0,A.t)("subscribeInCommentsTitle"),description:(0,A.t)("subscribeInCommentsDescription")}),(0,be.jsx)(Oe,{event:"on_register",title:(0,A.t)("subscribeInRegistrationTitle"),description:(0,A.t)("subscribeInRegistrationDescription")}),(0,be.jsx)(Ue,{}),(0,be.jsx)(Ge,{}),(0,be.jsx)(qe,{}),(0,be.jsx)(Ke,{}),(0,be.jsx)(Be,{}),(0,be.jsx)(We,{name:"mailpoet_archive",title:(0,A.t)("archiveShortcodeTitle"),description:(0,A.t)("archiveShortcodeDescription")}),(0,be.jsx)(We,{name:"mailpoet_subscribers_count",title:(0,A.t)("subscribersCountShortcodeTitle"),description:(0,A.t)("subscribersCountShortcodeDescription")}),(0,be.jsx)($e,{}),(0,be.jsx)(we,{})]})}function Xe(){const[e,t]=Ae("cron_trigger","method"),s=Ee("getPaths")();return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("taskCron"),description:(0,be.jsxs)(be.Fragment,{children:[(0,A.t)("taskCronDescription")," ",(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/129-what-is-the-newsletter-task-scheduler","data-beacon-article":"57ce0a7a903360649f6e5703",rel:"noopener noreferrer",target:"_blank",children:(0,A.t)("readMore")})]}),htmlFor:"cron_trigger-method"}),(0,be.jsxs)(fe,{children:[(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"cron_trigger-method-wordpress",value:"WordPress",checked:"WordPress"===e,onCheck:t,automationId:"wordress_cron_radio"}),(0,be.jsx)("label",{htmlFor:"cron_trigger-method-wordpress",children:(0,A.t)("websiteVisitors")})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"cron_trigger-method-cron",value:"Linux Cron",checked:"Linux Cron"===e,onCheck:t,automationId:"linux_cron_radio"}),(0,be.jsx)("label",{htmlFor:"cron_trigger-method-cron",children:(0,A.t)("serverCron")})]}),"Linux Cron"===e&&(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,A.t)("addCommandToCrontab")}),(0,be.jsx)(De.I,{dimension:"small",type:"text",readOnly:!0,value:`php ${s.plugin}/mailpoet-cron.php ${s.root}`}),(0,be.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,A.t)("withFrequency")}),(0,be.jsx)(De.I,{dimension:"small",type:"text",readOnly:!0,value:"*/1 * * * *"})]})]})]})}function Je(){const e=Ee("hasMembersPlugin")();return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("rolesTitle"),description:(0,A.t)("rolesDescription"),htmlFor:""}),(0,be.jsx)(fe,{children:(0,be.jsx)("p",{children:e?(0,be.jsx)("a",{className:"mailpoet-link",href:"?page=roles",children:(0,A.t)("manageUsingMembers")}):Ce()((0,A.t)("installMembers"),/\[link\](.*?)\[\/link\]/,(e=>(0,be.jsx)("a",{className:"mailpoet-link",href:"https://wordpress.org/plugins/members/",rel:"noopener noreferrer",target:"_blank",children:e},e)))})})]})}function Ze(){const[e,t]=Ae("tracking","level");return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("engagementTrackingTitle"),description:(0,A.t)("engagementTrackingDescription"),htmlFor:"engagement_tracking"}),(0,be.jsxs)(fe,{children:[(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"tracking-basic",value:"basic",checked:"basic"===e,onCheck:t,automationId:"tracking-basic-radio"}),(0,be.jsx)("label",{htmlFor:"tracking-basic",children:(0,A.t)("engagementTrackingBasic")})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"tracking-partial",value:"partial",checked:"partial"===e,onCheck:t,automationId:"tracking-partial-radio"}),(0,be.jsx)("label",{htmlFor:"tracking-partial",children:(0,A.t)("engagementTrackingPartial")})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"tracking-full",value:"full",checked:"full"===e,onCheck:t,automationId:"tracking-full-radio"}),(0,be.jsx)("label",{htmlFor:"tracking-full",children:(0,A.t)("engagementTrackingFull")})]})]})]})}function Qe(){const[e]=Ae("smtp_provider"),t=Ee("isMssActive")(),[s,i]=Ae("send_transactional_emails");let n="";return t?n="MailPoet Sending Service":"manual"===e?n="SMTP":"SendGrid"===e?n="SendGrid":"AmazonSES"===e?n="Amazon SES":"server"===e&&(n=(0,A.t)("hostOption")),(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("transactionalTitle"),description:(0,be.jsxs)(be.Fragment,{children:[(0,A.t)("transactionalDescription")," ",(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/292-choose-how-to-send-your-wordpress-websites-emails","data-beacon-article":"5ddbf92504286364bc9228c5",rel:"noopener noreferrer",target:"_blank",children:(0,A.t)("transactionalLink")})]}),htmlFor:""}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(Ye.Y,{id:"transactional-enabled",value:"1",checked:"1"===s,onCheck:i}),(0,be.jsxs)("label",{htmlFor:"transactional-enabled",children:[(0,A.t)("transactionalCurrentMethod").replace("%1$s",n),(0,be.jsx)("br",{}),(0,be.jsx)("span",{className:"mailpoet-note",children:Ce()((0,A.t)("transactionalMssNote"),/\[link\](.*?)\[\/link\]/,(e=>(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/292-choose-how-to-send-your-wordpress-websites-emails#attachments",rel:"noopener noreferrer","data-beacon-article":"5ddbf92504286364bc9228c5",target:"_blank",children:e},e)))})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"transactional-disabled",value:"",checked:""===s,onCheck:i}),(0,be.jsx)("label",{htmlFor:"transactional-disabled",children:(0,A.t)("transactionalWP")})]})]})]})}function et(){const[e,t]=Ae("deactivate_subscriber_after_inactive_days"),[s]=Ae("tracking","level"),i="basic"!==s;return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("inactiveSubsTitle"),description:(0,be.jsxs)(be.Fragment,{children:[(0,A.t)("inactiveSubsDescription")," ",(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/264-inactive-subscribers","data-beacon-article":"5cbf19622c7d3a026fd3efe1",rel:"noopener noreferrer",target:"_blank",children:(0,A.t)("readMore")})]}),htmlFor:""}),(0,be.jsxs)(fe,{children:[!i&&(0,be.jsx)("p",{"data-automation-id":"inactive-subscribers-disabled",children:(0,A.t)("disabledBecauseTrackingIs")}),i&&(0,be.jsxs)("div",{"data-automation-id":"inactive-subscribers-enabled",children:[(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"inactive-subscribers-disabled",automationId:"inactive-subscribers-option-never",value:"",checked:""===e,onCheck:t}),(0,be.jsx)("label",{htmlFor:"inactive-subscribers-disabled",children:(0,A.t)("never")})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"inactive-subscribers-3-months",value:"90",checked:"90"===e,onCheck:t}),(0,be.jsx)("label",{htmlFor:"inactive-subscribers-3-months",children:(0,A.t)("after3months")})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"inactive-subscribers-6-months",value:"180",checked:"180"===e,onCheck:t}),(0,be.jsx)("label",{htmlFor:"inactive-subscribers-6-months",children:(0,A.t)("after6months")})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"inactive-subscribers-12-months",value:"365",checked:"365"===e,onCheck:t,automationId:"inactive-subscribers-default"}),(0,be.jsx)("label",{htmlFor:"inactive-subscribers-12-months",children:(0,A.t)("after12months")})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"inactive-subscribers-18-months",value:"540",checked:"540"===e,onCheck:t}),(0,be.jsx)("label",{htmlFor:"inactive-subscribers-18-months",children:(0,A.t)("after18months")})]})]})]})]})}function tt(){const[e,t]=Ae("analytics","enabled"),[,s]=Ae("3rd_party_libs","enabled");return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("shareDataTitle"),description:(0,be.jsxs)(be.Fragment,{children:[(0,A.t)("shareDataDescription")," ",(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/130-sharing-your-data-with-us","data-beacon-article":"57ce0aaac6979108399a0454",rel:"noopener noreferrer",target:"_blank",children:(0,A.t)("readMore")})]}),htmlFor:""}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(Ye.Y,{id:"share-data-enabled",value:"1",checked:"1"===e,onCheck:()=>{t("1"),s("1")},automationId:"analytics-yes"}),(0,be.jsx)("label",{htmlFor:"share-data-enabled",children:(0,A.t)("yes")}),(0,be.jsx)("span",{className:"mailpoet-gap"}),(0,be.jsx)(Ye.Y,{id:"share-data-disabled",value:"",checked:""===e,onCheck:t,automationId:"analytics-no"}),(0,be.jsx)("label",{htmlFor:"share-data-disabled",children:(0,A.t)("no")})]})]})}function st(){const[e,t]=Ae("3rd_party_libs","enabled"),[,s]=Ae("analytics","enabled");return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("libs3rdPartyTitle"),description:(0,be.jsxs)(be.Fragment,{children:[(0,A.t)("libs3rdPartyDescription")," ",(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/338-what-3rd-party-libraries-we-use","data-beacon-article":"5f7c7dd94cedfd0017dcece8",rel:"noopener noreferrer",target:"_blank",children:(0,A.t)("readMore")})]}),htmlFor:""}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(Ye.Y,{id:"libs-3rd-party-enabled",value:"1",checked:"1"===e,onCheck:t}),(0,be.jsx)("label",{htmlFor:"libs-3rd-party-enabled",children:(0,A.t)("yes")}),(0,be.jsx)("span",{className:"mailpoet-gap"}),(0,be.jsx)(Ye.Y,{id:"libs-3rd-party-disabled",value:"",checked:""===e,onCheck:()=>{t(""),s("")}}),(0,be.jsx)("label",{htmlFor:"libs-3rd-party-disabled",children:(0,A.t)("no")})]})]})}function it(){const[e,t]=Ae("captcha","type"),[s,i]=Ae("captcha","recaptcha_site_token"),[n,a]=Ae("captcha","recaptcha_secret_token"),[r,o]=Ae("captcha","recaptcha_invisible_site_token"),[l,c]=Ae("captcha","recaptcha_invisible_secret_token"),m=Ee("isBuiltInCaptchaSupported")(),d=ke("setErrorFlag"),u="recaptcha"===e&&""===s.trim(),p="recaptcha"===e&&""===n.trim(),h="recaptcha-invisible"===e&&""===r.trim(),g="recaptcha-invisible"===e&&""===l.trim();return(0,ye.useEffect)((()=>{d(u||p||g||h)}),[p,u,g,h,d]),(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("captchaTitle"),description:(0,be.jsxs)(be.Fragment,{children:[(0,A.t)("captchaDescription")," ",(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/182-add-a-captcha-to-subscription-forms",rel:"noopener noreferrer",target:"_blank",children:(0,A.t)("readMore")}),("recaptcha"===e||"recaptcha-invisible"===e)&&(0,be.jsxs)("p",{children:[(0,be.jsxs)("span",{children:[(0,A.t)("reCaptchaDescription")," "]}),(0,be.jsx)("a",{className:"mailpoet-link",href:"https://www.google.com/recaptcha/admin",rel:"noopener noreferrer",target:"_blank",children:(0,A.t)("signupForCaptchaKey")})]})]}),htmlFor:""}),(0,be.jsxs)(fe,{children:[(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"built-in-captcha",disabled:!m,value:"built-in",checked:"built-in"===e,onCheck:t}),(0,be.jsxs)("label",{htmlFor:"built-in-captcha",children:[(0,A.t)("builtInCaptcha")," ",!m&&(0,A.t)("disbaledBecauseExtensionMissing")]})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"google-captcha",value:"recaptcha",checked:"recaptcha"===e,onCheck:t}),(0,be.jsx)("label",{htmlFor:"google-captcha",children:(0,A.t)("googleReCaptchaCheckbox")})]}),"recaptcha"===e&&(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(De.I,{dimension:"small",type:"text",value:s,onChange:(0,A.z2)(i),placeholder:(0,A.t)("yourReCaptchaKey")}),u&&(0,be.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,A.t)("fillReCaptchaKeys")}),(0,be.jsx)("br",{}),(0,be.jsx)(De.I,{dimension:"small",type:"text",value:n,onChange:(0,A.z2)(a),placeholder:(0,A.t)("yourReCaptchaSecret")}),p&&(0,be.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,A.t)("fillReCaptchaKeys")})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"google-captcha-invisible",value:"recaptcha-invisible",checked:"recaptcha-invisible"===e,onCheck:t}),(0,be.jsx)("label",{htmlFor:"google-captcha-invisible",children:(0,A.t)("googleReCaptchaInvisible")})]}),"recaptcha-invisible"===e&&(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(De.I,{dimension:"small",type:"text",value:r,onChange:(0,A.z2)(o),placeholder:(0,A.t)("yourReCaptchaKey")}),h&&(0,be.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,A.t)("fillReCaptchaKeys")}),(0,be.jsx)("br",{}),(0,be.jsx)(De.I,{dimension:"small",type:"text",value:l,onChange:(0,A.z2)(c),placeholder:(0,A.t)("yourReCaptchaSecret")}),g&&(0,be.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,A.t)("fillReCaptchaKeys")})]}),(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,be.jsx)(Ye.Y,{id:"no-captcha",value:"",checked:""===e,onCheck:t}),(0,be.jsx)("label",{htmlFor:"no-captcha",children:(0,A.t)("disable")})]})]})]})}function nt(){const e=ke("reinstall"),{notices:t}=(0,ye.useContext)(l.k);return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("reinstallTitle"),description:(0,A.t)("reinstallDescription"),htmlFor:""}),(0,be.jsx)(fe,{children:(0,be.jsx)(Ie.z,{type:"button",onClick:async()=>{if(window.confirm((0,A.t)("reinstallConfirmation"))){const s=await e();"SAVE_FAILED"===s.type?t.error(s.error.map((e=>(0,be.jsx)("p",{children:e}))),{scroll:!0}):window.location.href="admin.php?page=mailpoet-newsletters"}},automationId:"reinstall-button",variant:"destructive",children:(0,A.t)("reinstallNow")})})]})}function at(){const e=ke("recalculateSubscribersScore"),{notices:t}=(0,ye.useContext)(l.k);return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("recalculateSubscribersScoreTitle"),description:(0,A.t)("recalculateSubscribersScoreDescription"),htmlFor:""}),(0,be.jsx)(fe,{children:(0,be.jsx)(Ie.z,{type:"button",onClick:async()=>{await e(),t.info((0,be.jsx)("p",{children:(0,A.t)("recalculateSubscribersScoreNotice")}),{scroll:!0})},variant:"secondary",dimension:"small",children:(0,A.t)("recalculateSubscribersScoreNow")})})]})}function rt(){const[e,t]=Ae("logging");return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("loggingTitle"),description:(0,be.jsxs)(be.Fragment,{children:[(0,A.t)("loggingDescription")," ",(0,be.jsx)("a",{href:"?page=mailpoet-logs",className:"mailpoet-link",children:(0,A.t)("loggingDescriptionLink")})]}),htmlFor:"logging-level"}),(0,be.jsx)(fe,{children:(0,be.jsxs)(Fe.P,{id:"logging-level",value:e,onChange:(0,A.z2)(t),automationId:"logging-select-box",isMinWidth:!0,dimension:"small",children:[(0,be.jsx)("option",{value:"everything","data-automation-id":"log-everything",children:(0,A.t)("everythingLogOption")}),(0,be.jsx)("option",{value:"errors","data-automation-id":"log-errors",children:(0,A.t)("errorsLogOption")}),(0,be.jsx)("option",{value:"nothing","data-automation-id":"log-nothing",children:(0,A.t)("nothingLogOption")})]})})]})}function ot(){const[e,t]=Ae("bounce","address");return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("bounceEmail"),description:(0,be.jsxs)(be.Fragment,{children:[(0,A.t)("yourBouncedEmails")," ",(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/180-how-bounce-management-works-in-mailpoet-3","data-beacon-article":"58a5a7502c7d3a576d353c78",rel:"noopener noreferrer",target:"_blank",children:(0,A.t)("readMore")})]}),htmlFor:"bounce-address"}),(0,be.jsx)(fe,{children:(0,be.jsx)(De.I,{dimension:"small",type:"text",id:"bounce-address",placeholder:"bounce@mydomain.com","data-automation-id":"bounce-address-field",value:e,onChange:(0,A.z2)((0,A.pz)(t))})})]})}function lt(){return(0,be.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,be.jsx)(ot,{}),(0,be.jsx)(Xe,{}),(0,be.jsx)(Je,{}),(0,be.jsx)(Ze,{}),(0,be.jsx)(Qe,{}),(0,be.jsx)(at,{}),(0,be.jsx)(et,{}),(0,be.jsx)(tt,{}),(0,be.jsx)(st,{}),(0,be.jsx)(it,{}),(0,be.jsx)(nt,{}),(0,be.jsx)(rt,{}),(0,be.jsx)(we,{})]})}var ct=s(13651);function mt(){return(0,be.jsx)("div",{className:"mailpoet_success_item mailpoet_success_item mailpoet_success",children:j.x.I18n.t("premiumTabKeyValidMessage")})}function dt(){return(0,be.jsx)("div",{className:"mailpoet_error_item mailpoet_error",children:j.x.I18n.t("premiumTabKeyNotValidMessage")})}function ut(){const{isKeyValid:e}=Ee("getKeyActivationState")();return e?(0,be.jsx)(mt,{}):(0,be.jsx)(dt,{})}function pt(){return(0,be.jsx)("div",{className:"mailpoet_success_item mailpoet_success mailpoet_mss_key_valid",children:j.x.I18n.t("premiumTabMssActiveMessage")})}function ht(e){let{message:t}=e;return(0,be.jsx)("div",{className:"mailpoet_error",children:t||j.x.I18n.t("premiumTabMssKeyNotValidMessage")})}function gt(e){let{activationCallback:t}=e;return(0,be.jsxs)("div",{className:"mailpoet_error",children:[j.x.I18n.t("premiumTabMssNotActiveMessage")," ",(0,be.jsx)("button",{type:"button",className:"mailpoet-button button button-primary button-small",onClick:t,children:j.x.I18n.t("premiumTabMssActivateMessage")})]})}function _t(e){const{mssStatus:t}=Ee("getKeyActivationState")();switch(t){case v.VALID_MSS_ACTIVE:return(0,be.jsx)(pt,{});case v.VALID_MSS_NOT_ACTIVE:return(0,be.jsx)(gt,{activationCallback:e.activationCallback});case v.INVALID:return(0,be.jsx)(ht,{message:e.keyMessage});default:return null}}function xt(){return(0,be.jsx)("div",{className:"mailpoet_success_item mailpoet_success",children:j.x.I18n.t("premiumTabPremiumActiveMessage")})}function jt(e){return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"mailpoet_error mailpoet_install_premium_message",children:j.x.I18n.t("premiumTabPremiumNotActivatedMessage")}),e.url&&(0,be.jsx)(Ie.z,{href:e.url,children:j.x.I18n.t("premiumTabPremiumActivateMessage")})]})}function bt(e){return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"mailpoet_error mailpoet_install_premium_message",children:j.x.I18n.t("premiumTabPremiumNotInstalledMessage")}),e.url&&(0,be.jsx)(Ie.z,{href:e.url,children:j.x.I18n.t("premiumTabPremiumDownloadMessage")})]})}function vt(e){let{message:t}=e;return(0,be.jsx)("div",{className:"mailpoet_error",children:t||j.x.I18n.t("premiumTabPremiumKeyNotValidMessage")})}function ft(e){const{premiumStatus:t,downloadUrl:s,activationUrl:i}=Ee("getKeyActivationState")();switch(t){case b.VALID_PREMIUM_PLUGIN_ACTIVE:return(0,be.jsx)(xt,{});case b.VALID_PREMIUM_PLUGIN_NOT_INSTALLED:return(0,be.jsx)(bt,{url:s});case b.VALID_PREMIUM_PLUGIN_NOT_ACTIVE:return(0,be.jsx)(jt,{url:i});case b.INVALID:return(0,be.jsx)(vt,{message:e.keyMessage});default:return null}}function yt(){return(0,be.jsxs)("div",{className:"mailpoet_error_item mailpoet_error",children:[j.x.I18n.t("premiumTabKeyCannotValidate"),(0,be.jsxs)("ul",{className:"disc-inside-list",children:[(0,be.jsx)("li",{children:j.x.I18n.t("premiumTabKeyCannotValidateLocalhost")}),(0,be.jsx)("li",{children:j.x.I18n.t("premiumTabKeyCannotValidateBlockingHost")}),(0,be.jsx)("li",{children:j.x.I18n.t("premiumTabKeyCannotValidateIntranet")})]}),(0,be.jsx)("p",{children:(0,be.jsx)("a",{href:"https://kb.mailpoet.com/article/319-known-errors-when-validating-a-mailpoet-key",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"5ef1da9d2c7d3a10cba966c5",className:"mailpoet_error",children:j.x.I18n.t("learnMore")})})]})}function It(e,t,s){return 503===e.code?(0,be.jsx)("div",{className:"key-activation-messages",children:(0,be.jsx)(yt,{})}):(0,be.jsxs)("div",{className:"key-activation-messages",children:[(0,be.jsx)(ut,{}),null!==e.mssStatus&&(0,be.jsx)(_t,{keyMessage:e.mssMessage,activationCallback:s}),e.congratulatoryMssEmailSentTo&&(0,be.jsx)("div",{className:"mailpoet_success_item mailpoet_success",children:(0,A.t)("premiumTabCongratulatoryMssEmailSent").replace("[email_address]",e.congratulatoryMssEmailSentTo)}),null!==e.premiumStatus&&(0,be.jsx)(ft,{keyMessage:e.premiumMessage}),t&&(0,be.jsxs)("div",{className:"mailpoet_success",children:[(0,be.jsx)("div",{className:"pending_approval_heading",children:(0,A.t)("premiumTabPendingApprovalHeading")}),(0,be.jsx)("div",{children:(0,A.t)("premiumTabPendingApprovalMessage")})]}),!e.isKeyValid&&(0,be.jsx)("p",{children:(0,be.jsx)("a",{href:"https://kb.mailpoet.com/article/319-known-errors-when-validating-a-mailpoet-key",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"5ef1da9d2c7d3a10cba966c5",className:"mailpoet_error",children:j.x.I18n.t("learnMore")})})]})}function St(){const{notices:e}=(0,ye.useContext)(l.k),t=Ee("getKeyActivationState")(),s=ke("updateKeyActivationState"),i=ke("verifyMssKey"),n=ke("verifyPremiumKey"),a=ke("sendCongratulatoryMssEmail"),[r,o]=Ae("sender","address"),[c,m]=Ae("authorized_emails_addresses_check"),[d]=Ae("mta","mailpoet_api_key_state","data"),u=t.fromAddressModalCanBeShown&&t.mssStatus===v.VALID_MSS_ACTIVE&&(!r||c),p=!1===t.inProgress&&t.mssStatus===v.VALID_MSS_ACTIVE&&d&&!1===d.is_approved;return(0,be.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,be.jsx)(ve,{htmlFor:"mailpoet_premium_key",title:(0,A.t)("premiumTabActivationKeyLabel"),description:(0,A.t)("premiumTabDescription")}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(De.I,{type:"text",id:"mailpoet_premium_key",name:"premium[premium_key]",value:t.key||"",onChange:e=>s({mssStatus:null,premiumStatus:null,premiumInstallationStatus:null,key:e.target.value.trim()||null})}),(0,be.jsx)(Ie.z,{type:"button",onClick:async()=>{t.key?(await s({mssStatus:null,premiumStatus:null,premiumInstallationStatus:null}),j.x.Modal.loading(!0),s({inProgress:!0}),await i(t.key),await a(),await n(t.key),s({inProgress:!1}),j.x.Modal.loading(!1),s({fromAddressModalCanBeShown:!0})):e.error((0,be.jsx)("p",{children:(0,A.t)("premiumTabNoKeyNotice")}),{scroll:!0})},children:(0,A.t)("premiumTabVerifyButton")}),null!==t.isKeyValid&&It(t,p,(async function(){await i(t.key),a(),s({fromAddressModalCanBeShown:!0})}))]}),u&&(0,be.jsx)(ct.d,{onRequestClose:()=>{s({fromAddressModalCanBeShown:!1}),a()},setAuthorizedAddress:async e=>{await o(e),await m(null)}})]})}ht.defaultProps={message:""},_t.defaultProps={keyMessage:""},vt.defaultProps={message:""},ft.defaultProps={keyMessage:""};var kt=s(5977),Nt=s(73727);function Et(){const e=(0,kt.useHistory)(),t=Ee("isMssActive")(),[s]=Ae("mta","mailpoet_api_key"),{mssStatus:i,premiumStatus:n}=Ee("getKeyActivationState")(),a=null!==i&&i!==v.INVALID,r=null!==n&&n!==b.INVALID,o=window.mailpoet_free_plan_url,l=ke("setSetting"),c=ke("saveSettings");return(0,be.jsxs)("ul",{className:"mailpoet-sending-methods",children:[(0,be.jsx)("li",{children:(0,be.jsxs)("label",{className:"mailpoet-sending-method mailpoet-form-checkbox",children:[(0,be.jsx)("input",{type:"radio",checked:t,onChange:async i=>{i.preventDefault(),t||a||e.push("/premium"),!t&&a&&await(async()=>(await l(["mta_group"],"mailpoet"),await l(["mta","method"],"MailPoet"),await l(["mta","mailpoet_api_key"],s),await l(["signup_confirmation","enabled"],"1"),c()))()}}),(0,be.jsx)("span",{className:"mailpoet-form-radio-control"}),(0,be.jsx)("h4",{className:"mailpoet-h4",children:(0,A.t)("mssTitle")}),(0,be.jsx)("p",{children:t?(0,A.t)("youreSendingWithMss"):(0,A.t)("solveSendingProblems")}),(0,be.jsxs)("ul",{className:"mailpoet-sending-method-benefits mailpoet_success",children:[(0,be.jsx)("li",{className:"mailpoet_success_item",children:(0,A.t)("mssBenefit1")}),(0,be.jsx)("li",{className:"mailpoet_success_item",children:(0,A.t)("mssBenefit2")}),(0,be.jsx)("li",{className:"mailpoet_success_item",children:(0,A.t)("mssBenefit3")}),(0,be.jsx)("li",{className:"mailpoet_success_item",children:(0,A.t)("mssBenefit4")}),(0,be.jsx)("li",{className:"mailpoet_success_item",children:(0,A.t)("mssBenefit5")})]}),!a&&!r&&(0,be.jsxs)("div",{className:"mailpoet-sending-method-actions",children:[(0,be.jsx)("a",{className:"mailpoet-button button-primary",href:o,rel:"noopener noreferrer",target:"_blank",children:(0,A.t)("freeUpto")}),(0,be.jsxs)("span",{children:[" ",(0,A.t)("or")," "]}),Ce()((0,A.t)("enterYourKey"),/\[link\](.*?)\[\/link\]/g,((e,t)=>(0,be.jsx)(Nt.rU,{to:"/premium",className:"mailpoet-link",children:e},t)))]}),!a&&r&&(0,be.jsxs)("div",{className:"mailpoet-sending-method-actions",children:[(0,be.jsx)("i",{children:(0,A.t)("invalidKeyForMss")})," ",(0,be.jsx)("a",{className:"mailpoet-button button-primary",href:"https://account.mailpoet.com/",rel:"noopener noreferrer",target:"_blank",children:(0,A.t)("getPlan")})]})]})}),(0,be.jsx)("li",{children:(0,be.jsxs)("label",{className:"mailpoet-sending-method mailpoet-form-checkbox",children:[(0,be.jsx)("input",{type:"radio",checked:!t,onChange:t=>{t.preventDefault(),e.push("/mta/other")}}),(0,be.jsx)("span",{className:"mailpoet-form-radio-control"}),(0,be.jsx)("h4",{className:"mailpoet-h4",children:(0,A.t)("otherTitle")}),(0,be.jsxs)("p",{children:[(0,A.t)("sendViaHost")," ",(0,be.jsx)("strong",{children:(0,A.t)("notRecommended")})," ",(0,A.t)("orViaThirdParty")]}),(0,be.jsx)("div",{className:"mailpoet-sending-method-actions",children:(0,be.jsx)(Nt.rU,{to:"/mta/other",className:"mailpoet-link",children:(0,A.t)("configure")})})]})})]})}function At(){const[e,t]=Ae("smtp_provider"),[,s]=Ae("mta_group"),[,i]=Ae("mta","method");return(0,ye.useEffect)((()=>{switch(e){case"server":s("website"),i("PHPMail");break;case"manual":s("smtp"),i("SMTP");break;case"AmazonSES":s("smtp"),i("AmazonSES");break;case"SendGrid":s("smtp"),i("SendGrid");break;default:i("PHPMail")}}),[e,s,i]),(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("method"),htmlFor:"mailpoet_smtp_method"}),(0,be.jsx)(fe,{children:(0,be.jsxs)(Fe.P,{id:"mailpoet_smtp_method",value:e,onChange:(0,A.z2)(t),isMinWidth:!0,dimension:"small",children:[(0,be.jsx)("option",{value:"server",children:(0,A.t)("hostOption")}),(0,be.jsx)("option",{value:"manual",children:(0,A.t)("smtpOption")}),(0,be.jsxs)("optgroup",{label:(0,A.t)("selectProvider"),children:[(0,be.jsx)("option",{value:"AmazonSES",children:"Amazon SES"}),(0,be.jsx)("option",{value:"SendGrid",children:"SendGrid"})]})]})})]})}function Tt(){return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("spfTitle"),description:(0,A.t)("spfDescription"),htmlFor:""}),(0,be.jsx)(fe,{children:(0,A.t)("spfSetup")})]})}var Ct=s(49793),wt=s(38287);function Mt(){const[e,t]=(0,ye.useState)(window.mailpoet_current_user_email),[s]=Ae("mta"),{state:i,error:n}=Ee("getTestEmailState")(),a=ke("sendTestEmail");return(0,be.jsxs)(be.Fragment,{children:[i===y.SENDING&&(0,be.jsx)(ge.g,{}),i===y.SUCCESS&&(0,be.jsx)(wt.q,{type:"success",scroll:!0,children:(0,be.jsx)("p",{children:(0,A.t)("emailSent")})}),i===y.FAILURE&&(0,be.jsx)(wt.q,{type:"error",scroll:!0,children:(0,be.jsx)("p",{children:n.map((e=>(0,be.jsx)("p",{children:e},e)))})}),(0,be.jsx)(ve,{title:(0,A.t)("testSending"),htmlFor:"mailpoet_mta_test_email"}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(De.I,{dimension:"small",type:"text",id:"mailpoet_mta_test_email",value:e,onChange:(0,A.z2)(t)}),(0,be.jsx)(Ie.z,{type:"button",dimension:"small",variant:"secondary",onClick:()=>a(e,s),children:(0,A.t)("sendTestEmail")}),(0,be.jsx)(Ct.Tooltip,{tooltipId:"tooltip-settings-test",className:"mailpoet_tooltip_icon",tooltip:(0,be.jsx)("span",{style:{pointerEvents:"all"},children:Ce()((0,A.t)("testEmailTooltip"),/\[link\](.*?)\[\/link\]/g,((e,t)=>(0,be.jsx)("a",{className:"mailpoet-link",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"580846f09033604df5166ed1",href:"https://kb.mailpoet.com/article/146-my-newsletters-are-not-being-received",children:e},t)))})})]})]})}function Lt(){const e=ke("saveSettings"),t=ke("loadSettings"),s=(0,kt.useHistory)();return(0,be.jsxs)("div",{className:"mailpoet-settings-save",children:[(0,be.jsx)(Ie.z,{type:"button",onClick:async()=>{await e(),s.push("/mta")},children:(0,A.t)("activate")}),(0,be.jsx)(Ie.z,{onClick:async()=>{j.x.Modal.loading(!0),await t(),s.push("/mta"),j.x.Modal.loading(!1)},variant:"tertiary",children:(0,A.t)("orCancel")})]})}function Ft(e){const t=Math.floor(parseInt(e,10));return t>60?(0,A.t)("everyHours").replace("%1$d",""+t/60):60===t?(0,A.t)("everyHour"):t>1?(0,A.t)("everyMinutes").replace("%1$d",`${t}`):(0,A.t)("everyMinute")}function Pt(e){let{recommendedEmails:t,recommendedInterval:s}=e;const[i,n]=Ae("mailpoet_sending_frequency"),[a,r]=Ae("mta","frequency","emails"),[o,l]=Ae("mta","frequency","interval");(0,ye.useEffect)((()=>{"auto"===i&&(r(`${t}`),l(`${s}`))}),[i,t,s,r,l]);const c=Math.floor(1440*parseInt(a,10)/parseInt(o,10)),m=Math.floor(c/86400*10)/10;return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("sendingFrequency"),htmlFor:"mailpoet_sending_frequency"}),(0,be.jsxs)(fe,{children:[(0,be.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,be.jsxs)(Fe.P,{id:"mailpoet_sending_frequency",value:i,onChange:(0,A.z2)(n),dimension:"small",children:[(0,be.jsx)("option",{value:"auto",children:(0,A.t)("recommendedTitle")}),(0,be.jsx)("option",{value:"manual",children:(0,A.t)("ownFrequency")})]})}),"manual"===i&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row mailpoet-settings-inputs-row-centered",children:[(0,be.jsx)(De.I,{dimension:"small",id:"other_frequency_emails",type:"number",min:"1",max:"1000",value:a,onChange:(0,A.z2)(r)}),(0,be.jsx)("span",{className:"mailpoet-gap"}),(0,be.jsx)("span",{children:(0,A.t)("emails")})]}),(0,be.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,be.jsxs)(Fe.P,{id:"other_frequency_interval",value:o,onChange:(0,A.z2)(l),dimension:"small",children:[(0,be.jsx)("option",{value:"1",children:"every minute"}),(0,be.jsx)("option",{value:"2",children:"every 2 minutes"}),(0,be.jsx)("option",{value:"5",children:"every 5 minutes (recommended)"}),(0,be.jsx)("option",{value:"10",children:"every 10 minutes"}),(0,be.jsx)("option",{value:"15",children:"every 15 minutes"}),(0,be.jsx)("option",{value:"30",children:"every 30 minutes"})]})})]}),"auto"===i&&(0,be.jsxs)("div",{className:"mailpoet-settings-inputs-row",children:[(0,A.t)("xEmails").replace("%1$s",a)," ",Ft(o),". "]}),(0,be.jsx)("div",{className:"mailpoet-settings-inputs-row",children:Ce()((0,A.t)("thatsXEmailsPerDay").replace("%1$s",c.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>(0,be.jsx)("strong",{children:e},t)))}),m>1&&(0,be.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,be.jsx)("span",{className:"mailpoet_emails_per_second_warning",children:Ce()((0,A.t)("thatsXEmailsPerSecond").replace("%1$s",m.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>(0,be.jsx)("strong",{children:e},t)))})}),"manual"===i&&(0,be.jsx)("div",{className:"mailpoet-settings-inputs-row",children:Ce()((0,A.t)("frequencyWarning").replace("%1$s",m.toLocaleString()),/<strong>(.*?)<\/strong>/g,((e,t)=>(0,be.jsx)("strong",{children:e},t)))})]})]})}function Dt(){const[e,t]=Ae("web_host"),s=Ee("getWebHosts")(),i=s[e];return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("yourHost"),htmlFor:"mailpoet_web_host"}),(0,be.jsx)(fe,{children:(0,be.jsx)(Fe.P,{id:"mailpoet_web_host",value:e,onChange:(0,A.z2)(t),isMinWidth:!0,dimension:"small",children:Object.entries(s).map((e=>{let[t,s]=e;return(0,be.jsx)("option",{value:t,children:s.name},t)}))})}),(0,be.jsx)(Pt,{recommendedEmails:i.emails,recommendedInterval:i.interval})]})}function Vt(){const[e,t]=Ae("mta","host"),[s,i]=Ae("mta","port"),[n,a]=Ae("mta","login"),[r,o]=Ae("mta","password"),[l,c]=Ae("mta","encryption"),[m,d]=Ae("mta","authentication");return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Pt,{recommendedEmails:100,recommendedInterval:5}),(0,be.jsx)(ve,{title:(0,A.t)("smtpHost"),description:(0,A.t)("smtpHostExample"),htmlFor:"mailpoet_smtp_host"}),(0,be.jsx)(fe,{children:(0,be.jsx)(De.I,{dimension:"small",type:"text",id:"mailpoet_smtp_host",value:e,onChange:(0,A.z2)(t)})}),(0,be.jsx)(ve,{title:(0,A.t)("smtpPort"),htmlFor:"mailpoet_smtp_port"}),(0,be.jsx)(fe,{children:(0,be.jsx)(De.I,{dimension:"small",type:"text",id:"mailpoet_smtp_port",value:s,onChange:(0,A.z2)(i)})}),(0,be.jsx)(ve,{title:(0,A.t)("login"),htmlFor:"mailpoet_smtp_login"}),(0,be.jsx)(fe,{children:(0,be.jsx)(De.I,{dimension:"small",type:"text",id:"mailpoet_smtp_login",value:n,onChange:(0,A.z2)(a)})}),(0,be.jsx)(ve,{title:(0,A.t)("password"),htmlFor:"mailpoet_smtp_password"}),(0,be.jsx)(fe,{children:(0,be.jsx)(De.I,{dimension:"small",type:"password",id:"mailpoet_smtp_password",value:r,onChange:(0,A.z2)(o)})}),(0,be.jsx)(ve,{title:(0,A.t)("secureConnectioon"),htmlFor:"mailpoet_smtp_encryption"}),(0,be.jsx)(fe,{children:(0,be.jsxs)(Fe.P,{id:"mailpoet_smtp_encryption",value:l,onChange:(0,A.z2)(c),isMinWidth:!0,dimension:"small",children:[(0,be.jsx)("option",{value:"",children:(0,A.t)("no")}),(0,be.jsx)("option",{value:"ssl",children:"SSL"}),(0,be.jsx)("option",{value:"tls",children:"TLS"})]})}),(0,be.jsx)(ve,{title:(0,A.t)("authentication"),description:(0,A.t)("authenticationDescription"),htmlFor:"mailpoet_smtp_authentication"}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(Ye.Y,{value:"1",checked:"1"===m,onCheck:d}),(0,A.t)("yes")," ",(0,be.jsx)(Ye.Y,{value:"-1",checked:"-1"===m,onCheck:d}),(0,A.t)("no")]})]})}function Rt(){const[e,t]=Ae("mta","region"),[s,i]=Ae("mta","access_key"),[n,a]=Ae("mta","secret_key"),r=Ee("getAmazonSesOptions")();return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Pt,{recommendedEmails:r.emails,recommendedInterval:r.interval}),(0,be.jsx)(ve,{title:(0,A.t)("region"),htmlFor:"mailpoet_amazon_ses_region"}),(0,be.jsx)(fe,{children:(0,be.jsx)(Fe.P,{id:"mailpoet_amazon_ses_region",value:e,onChange:(0,A.z2)(t),isMinWidth:!0,dimension:"small",children:Object.entries(r.regions).map((e=>{let[t,s]=e;return(0,be.jsx)("option",{value:s,children:t},s)}))})}),(0,be.jsx)(ve,{title:(0,A.t)("accessKey"),htmlFor:"mailpoet_amazon_ses_access_key"}),(0,be.jsx)(fe,{children:(0,be.jsx)(De.I,{dimension:"small",type:"text",value:s,className:"regular-text",onChange:(0,A.z2)(i),id:"mailpoet_amazon_ses_access_key"})}),(0,be.jsx)(ve,{title:(0,A.t)("secretKey"),htmlFor:"mailpoet_amazon_ses_secret_key"}),(0,be.jsx)(fe,{children:(0,be.jsx)(De.I,{dimension:"small",type:"text",value:n,className:"regular-text",onChange:(0,A.z2)(a),id:"mailpoet_amazon_ses_secret_key"})})]})}function zt(){const[e,t]=Ae("mta","api_key"),s=Ee("getSendGridOptions")();return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Pt,{recommendedEmails:s.emails,recommendedInterval:s.interval}),(0,be.jsx)(ve,{title:(0,A.t)("apiKey"),htmlFor:"mailpoet_sendgrid_api_key"}),(0,be.jsx)(fe,{children:(0,be.jsx)(De.I,{dimension:"small",type:"text",value:e,onChange:(0,A.z2)(t),id:"mailpoet_sendgrid_api_key"})})]})}function Ot(){const[e]=Ae("mta","method");return(0,be.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,be.jsx)(At,{}),"PHPMail"===e&&(0,be.jsx)(Dt,{}),"SMTP"===e&&(0,be.jsx)(Vt,{}),"AmazonSES"===e&&(0,be.jsx)(Rt,{}),"SendGrid"===e&&(0,be.jsx)(zt,{}),(0,be.jsx)(Tt,{}),(0,be.jsx)(Mt,{}),(0,be.jsx)(Lt,{})]})}function Ut(){const{subPage:e}=(0,kt.useParams)();return"other"===e?(0,be.jsx)(Ot,{}):(0,be.jsx)(Et,{})}function Gt(){const e=Ee("isMssActive")(),[t,s]=Ae("signup_confirmation","enabled"),i=e=>{"1"===e&&window.confirm((0,A.t)("subscribersNeedToActivateSub"))&&s("1"),""===e&&window.confirm((0,A.t)("newSubscribersAutoConfirmed"))&&s("")};return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("enableSignupConfTitle"),description:(0,be.jsxs)(be.Fragment,{children:[(0,A.t)("enableSignupConfDescription")," ",(0,be.jsx)("a",{className:"mailpoet-link",href:"https://kb.mailpoet.com/article/128-why-you-should-use-signup-confirmation-double-opt-in","data-beacon-article":"57ce097f903360649f6e5700",rel:"noopener noreferrer",target:"_blank",children:(0,A.t)("readAboutDoubleOptIn")})]}),htmlFor:"signup_confirmation-enabled"}),(0,be.jsx)(fe,{children:e?(0,be.jsx)("p",{children:(0,A.t)("signupConfirmationIsMandatory")}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ye.Y,{id:"signup_confirmation-enabled",checked:"1"===t,value:"1",onCheck:i,automationId:"enable_signup_confirmation"}),(0,A.t)("yes")," ",(0,be.jsx)(Ye.Y,{checked:""===t,value:"",onCheck:i,automationId:"disable_signup_confirmation"}),(0,A.t)("no")]})})]})}function Kt(){const[e]=Ae("signup_confirmation","enabled"),[t,s]=Ae("signup_confirmation","subject");return e?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("emailSubject"),htmlFor:"signup_confirmation-subject"}),(0,be.jsx)(fe,{children:(0,be.jsx)(De.I,{dimension:"small",type:"text",size:50,id:"signup_confirmation-subject","data-automation-id":"signup_confirmation_email_subject",value:t,onChange:(0,A.z2)(s)})})]}):null}var Yt=s(97972);function Bt(){const[e]=Ae("signup_confirmation","enabled"),[t,s]=Ae("signup_confirmation","body");if(!e)return null;const i=(0,A.t)("emailContentDescription").split("<br />").filter((e=>e));return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("emailContent"),description:i.map((e=>(0,be.jsxs)("span",{children:[e,(0,be.jsx)("br",{}),(0,be.jsx)("br",{})]},e))),htmlFor:"signup_confirmation-body"}),(0,be.jsx)(fe,{children:(0,be.jsx)(Yt.g,{id:"signup_confirmation-body",cols:50,rows:15,"data-automation-id":"signup_confirmation_email_body",value:t,onChange:(0,A.z2)(s)})})]})}function Wt(){const[e]=Ae("signup_confirmation","enabled"),[t,s]=Ae("subscription","pages","confirmation");return e?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("confirmationPage"),description:(0,A.t)("confirmationPageDescription"),htmlFor:"subscription-pages-confirmation"}),(0,be.jsx)(fe,{children:(0,be.jsx)(Pe,{value:t,preview:"confirm",setValue:s,id:"subscription-pages-confirmation",automationId:"page_selection",linkAutomationId:"preview_page_link"})})]}):null}function $t(){return(0,be.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,be.jsx)(Gt,{}),(0,be.jsx)(Kt,{}),(0,be.jsx)(Bt,{}),(0,be.jsx)(Wt,{}),(0,be.jsx)(we,{})]})}function qt(){const[e,t]=Ae("woocommerce","use_mailpoet_editor"),[s]=Ae("woocommerce","transactional_email_id"),i=ke("openWoocommerceCustomizer");return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("wcCustomizerTitle"),description:(0,A.t)("wcCustomizerDescription"),htmlFor:"mailpoet_wc_customizer"}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(ze.X,{id:"mailpoet_wc_customizer",automationId:"mailpoet_wc_customizer",checked:"1"===e,onCheck:e=>t(e?"1":"")}),(0,be.jsx)("div",{className:"mailpoet-settings-inputs-row",children:(0,be.jsx)(Ie.z,{type:"button",onClick:()=>i(s),variant:"secondary",dimension:"small",children:(0,A.t)("openTemplateEditor")})})]})]})}function Ht(){const[e,t]=Ae("woocommerce","optin_on_checkout","enabled"),[s,i]=Ae("woocommerce","optin_on_checkout","segments"),[n,a]=Ae("woocommerce","optin_on_checkout","message"),r=ke("setErrorFlag"),o=""===n.trim();return(0,ye.useEffect)((()=>{r(o)}),[o,r]),(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("wcOptinTitle"),description:(0,A.t)("wcOptinDescription"),htmlFor:"mailpoet_wc_checkout_optin"}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(ze.X,{id:"mailpoet_wc_checkout_optin",automationId:"mailpoet_wc_checkout_optin",checked:"1"===e,onCheck:e=>t(e?"1":"")}),"1"===e&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("br",{}),(0,be.jsxs)("label",{htmlFor:"mailpoet_wc_checkout_optin_segments",children:[(0,A.t)("wcOptinSegmentsTitle"),(0,be.jsx)("br",{}),(0,be.jsx)("span",{children:(0,A.t)("leaveEmptyToSubscribeToWCCustomers")})]}),(0,be.jsx)("br",{}),(0,be.jsx)(Le,{id:"mailpoet_wc_checkout_optin_segments",value:s,setValue:i,placeholder:(0,A.t)("wcOptinSegmentsPlaceholder")})]})]}),"1"===e&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("wcOptinMsgTitle"),description:(0,A.t)("wcOptinMsgDescription"),htmlFor:"mailpoet_wc_checkout_optin_message"}),(0,be.jsxs)(fe,{children:[(0,be.jsx)(De.I,{dimension:"small",type:"text",id:"mailpoet_wc_checkout_optin_message","data-automation-id":"mailpoet_wc_checkout_optin_message",value:n,onChange:(0,A.z2)(a),placeholder:(0,A.t)("wcOptinMsgPlaceholder")}),(0,be.jsx)("br",{}),o&&(0,be.jsx)("span",{className:"mailpoet_error_item mailpoet_error",children:(0,A.t)("wcOptinMsgCannotBeEmpty")})]})]})]})}function Xt(){const[e,t]=Ae("mailpoet_subscribe_old_woocommerce_customers","enabled");return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ve,{title:(0,A.t)("subscribeOldWCTitle"),description:(0,A.t)("subscribeOldWCDescription"),htmlFor:"mailpoet_subscribe_old_wc_customers"}),(0,be.jsx)(fe,{children:(0,be.jsx)(ze.X,{id:"mailpoet_subscribe_old_wc_customers",automationId:"mailpoet_subscribe_old_wc_customers",checked:"1"===e,onCheck:e=>t(e?"1":"")})})]})}function Jt(){return(0,be.jsxs)("div",{className:"mailpoet-settings-grid",children:[(0,be.jsx)(qt,{}),(0,be.jsx)(Ht,{}),(0,be.jsx)(Xt,{}),(0,be.jsx)(we,{})]})}function Zt(){const e=Ee("isSaving")(),t=Ee("hasWooCommerce")();return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(je.D,{}),e&&(0,be.jsx)(ge.g,{}),(0,be.jsx)(he.w,{}),(0,be.jsxs)(_e.t,{activeKey:"basics",onSwitch:e=>(e=>{j.x.trackEvent("User has clicked a tab in Settings",{"Tab ID":e})})(e),children:[(0,be.jsx)(xe.O,{title:(0,A.t)("basicsTab"),automationId:"basic_settings_tab",children:(0,be.jsx)(He,{})},"basics"),(0,be.jsx)(xe.O,{title:(0,A.t)("signupConfirmationTab"),automationId:"signup_settings_tab",children:(0,be.jsx)($t,{})},"signup"),(0,be.jsx)(xe.O,{route:"mta/:subPage?",title:(0,A.t)("sendWithTab"),automationId:"send_with_settings_tab",children:(0,be.jsx)(Ut,{})},"mta"),t&&(0,be.jsx)(xe.O,{title:(0,A.t)("wooCommerceTab"),automationId:"woocommerce_settings_tab",children:(0,be.jsx)(Jt,{})},"woocommerce"),(0,be.jsx)(xe.O,{title:(0,A.t)("advancedTab"),automationId:"settings-advanced-tab",children:(0,be.jsx)(lt,{})},"advanced"),(0,be.jsx)(xe.O,{title:(0,A.t)("keyActivationTab"),automationId:"activation_settings_tab",children:(0,be.jsx)(St,{})},"premium")]})]})}function Qt(){return(0,be.jsx)(l.k.Provider,{value:(0,l.S)(window),children:(0,be.jsx)(Zt,{})})}const es=document.getElementById("settings_container");es&&((e=>{(0,c.R9)(m,{reducer:ue(pe(e)),actions:i,selectors:n,controls:a,resolvers:{}})})(window),o().render((0,be.jsx)(Qt,{}),es))},65311:function(e){e.exports=jQuery}},function(e){e.O(0,[351],(function(){return 11217,e(e.s=11217)})),e.O()}]);
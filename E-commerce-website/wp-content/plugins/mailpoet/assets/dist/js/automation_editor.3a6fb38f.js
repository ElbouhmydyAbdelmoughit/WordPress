"use strict";(self.webpackChunkMailPoet3=self.webpackChunkMailPoet3||[]).push([[392],{77515:function(e,t,n){var r={};n.r(r),n.d(r,{setIsMatching:function(){return I}});var s={};n.r(s),n.d(s,{isViewportMatch:function(){return L}});var i={};n.r(i),n.d(i,{set:function(){return V},setDefaults:function(){return B},setPersistenceLayer:function(){return H},toggle:function(){return O}});var a={};n.r(a),n.d(a,{get:function(){return $}});var o={};n.r(o),n.d(o,{disableComplementaryArea:function(){return K},enableComplementaryArea:function(){return U},pinItem:function(){return G},setFeatureDefaults:function(){return Q},setFeatureValue:function(){return J},toggleFeature:function(){return Y},unpinItem:function(){return q}});var l={};n.r(l),n.d(l,{getActiveComplementaryArea:function(){return ee},isFeatureActive:function(){return ne},isItemPinned:function(){return te}});var c={};n.r(c),n.d(c,{closeSidebar:function(){return Be},openSidebar:function(){return Ve},selectStep:function(){return Ue},setInserterPopoverAnchor:function(){return We},toggleFeature:function(){return He},toggleInserterSidebar:function(){return $e}});var d={};n.r(d),n.d(d,{getInserterActionSteps:function(){return ot},getInserterLogicalSteps:function(){return lt},getInserterPopoverAnchor:function(){return ct},getSelectedStep:function(){return ut},getWorkflowData:function(){return dt},isFeatureActive:function(){return st},isInserterSidebarOpened:function(){return at},isSidebarOpened:function(){return it}});var u=n(78596),m=n.n(u),p=n(52524),f=n.n(p),h=n(612),v=n(32508),g=n(94878),b=n(87462),_=n(45993),x=n(62248),w=n(93033),E=n(41882),j=n(54730),y=n(28184),S=n(59259),C=(0,_.createElement)(S.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_.createElement)(S.y$,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),k=(0,_.createElement)(S.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_.createElement)(S.y$,{fillRule:"evenodd",d:"M9.706 8.646a.25.25 0 01-.188.137l-4.626.672a.25.25 0 00-.139.427l3.348 3.262a.25.25 0 01.072.222l-.79 4.607a.25.25 0 00.362.264l4.138-2.176a.25.25 0 01.233 0l4.137 2.175a.25.25 0 00.363-.263l-.79-4.607a.25.25 0 01.072-.222l3.347-3.262a.25.25 0 00-.139-.427l-4.626-.672a.25.25 0 01-.188-.137l-2.069-4.192a.25.25 0 00-.448 0L9.706 8.646zM12 7.39l-.948 1.921a1.75 1.75 0 01-1.317.957l-2.12.308 1.534 1.495c.412.402.6.982.503 1.55l-.362 2.11 1.896-.997a1.75 1.75 0 011.629 0l1.895.997-.362-2.11a1.75 1.75 0 01.504-1.55l1.533-1.495-2.12-.308a1.75 1.75 0 01-1.317-.957L12 7.39z",clipRule:"evenodd"})),N=n(96486),Z=n(61299),A=n(79887);function I(e){return{type:"SET_IS_MATCHING",values:e}}function L(e,t){return-1===t.indexOf(" ")&&(t=">= "+t),!!e[t]}const M=(0,A.Z)("core/viewport",{reducer:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_MATCHING":return t.values}return e},actions:r,selectors:s});(0,Z.z2)(M),((e,t)=>{const n=(0,N.debounce)((()=>{const e=(0,N.mapValues)(r,(e=>e.matches));(0,Z.WI)(M).setIsMatching(e)}),{leading:!0}),r=(0,N.reduce)({huge:1440,wide:1280,large:960,medium:782,small:600,mobile:480},((e,r,s)=>((0,N.forEach)(t,((t,i)=>{const a=window.matchMedia(`(${t}: ${r}px)`);a.addListener(n);const o=[i,s].join(" ");e[o]=a})),e)),{});window.addEventListener("orientationchange",n),n(),n.flush()})(0,{"<":"max-width",">=":"min-width"});var D=n(27231),P=n(80369),F=n(49884),R=n.n(F);const T=function(e){let t;return(e,n)=>{if("SET_PERSISTENCE_LAYER"===n.type){const{persistenceLayer:e,persistedData:r}=n;return t=e,r}const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if("SET_PREFERENCE_VALUE"===t.type){const{scope:n,name:r,value:s}=t;return{...e,[n]:{...e[n],[r]:s}}}return e}(e,n);var s;return"SET_PREFERENCE_VALUE"===n.type&&(null===(s=t)||void 0===s||s.set(r)),r}}();var z=R()({defaults:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if("SET_PREFERENCE_DEFAULTS"===t.type){const{scope:n,defaults:r}=t;return{...e,[n]:{...e[n],...r}}}return e},preferences:T});function O(e,t){return function(n){let{select:r,dispatch:s}=n;const i=r.get(e,t);s.set(e,t,!i)}}function V(e,t,n){return{type:"SET_PREFERENCE_VALUE",scope:e,name:t,value:n}}function B(e,t){return{type:"SET_PREFERENCE_DEFAULTS",scope:e,defaults:t}}async function H(e){const t=await e.get();return{type:"SET_PERSISTENCE_LAYER",persistenceLayer:e,persistedData:t}}function $(e,t,n){var r,s;const i=null===(r=e.preferences[t])||void 0===r?void 0:r[n];return void 0!==i?i:null===(s=e.defaults[t])||void 0===s?void 0:s[n]}const W=(0,A.Z)("core/preferences",{reducer:z,actions:i,selectors:a});(0,Z.z2)(W);const U=(e,t)=>n=>{let{registry:r}=n;t&&r.dispatch(W).set(e,"complementaryArea",t)},K=e=>t=>{let{registry:n}=t;n.dispatch(W).set(e,"complementaryArea",null)},G=(e,t)=>n=>{let{registry:r}=n;if(!t)return;const s=r.select(W).get(e,"pinnedItems");!0!==(null==s?void 0:s[t])&&r.dispatch(W).set(e,"pinnedItems",{...s,[t]:!0})},q=(e,t)=>n=>{let{registry:r}=n;if(!t)return;const s=r.select(W).get(e,"pinnedItems");r.dispatch(W).set(e,"pinnedItems",{...s,[t]:!1})};function Y(e,t){return function(n){let{registry:r}=n;(0,P.Z)("wp.dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"wp.dispatch( 'core/preferences' ).toggle"}),r.dispatch(W).toggle(e,t)}}function J(e,t,n){return function(r){let{registry:s}=r;(0,P.Z)("wp.dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"wp.dispatch( 'core/preferences' ).set"}),s.dispatch(W).set(e,t,!!n)}}function Q(e,t){return function(n){let{registry:r}=n;(0,P.Z)("wp.dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"wp.dispatch( 'core/preferences' ).setDefaults"}),r.dispatch(W).setDefaults(e,t)}}var X=n(67775);const ee=(0,X.M)((e=>(t,n)=>e(W).get(n,"complementaryArea"))),te=(0,X.M)((e=>(t,n,r)=>{var s;const i=e(W).get(n,"pinnedItems");return null===(s=null==i?void 0:i[r])||void 0===s||s})),ne=(0,X.M)((e=>(t,n,r)=>((0,P.Z)("wp.select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"!! wp.select( 'core/preferences' ).isFeatureActive( scope, featureName )"}),!!e(W).get(n,r)))),re=(0,A.Z)("core/interface",{reducer:()=>{},actions:o,selectors:l});(0,Z.z2)(re),n(59588),n(52416);var se=n(27598);const{Consumer:ie,Provider:ae}=(0,_.createContext)({name:null,icon:null});var oe,le=(oe=(e,t)=>({icon:t.icon||e.icon,identifier:t.identifier||`${e.name}/${t.name}`}),(0,se.Z)((e=>t=>(0,_.createElement)(ie,null,(n=>(0,_.createElement)(e,(0,b.Z)({},t,oe(n,t)))))),"withPluginContext")),ce=le((function(e){let{as:t=x.Z,scope:n,identifier:r,icon:s,selectedIcon:i,...a}=e;const o=t,l=(0,g.Z)((e=>e(re).getActiveComplementaryArea(n)===r),[r]),{enableComplementaryArea:c,disableComplementaryArea:d}=(0,E.Z)(re);return(0,_.createElement)(o,(0,b.Z)({icon:i&&l?i:s,onClick:()=>{l?d(n):c(n,r)}},(0,N.omit)(a,["name"])))})),de=e=>{let{smallScreenTitle:t,children:n,className:r,toggleButtonProps:s}=e;const i=(0,_.createElement)(ce,(0,b.Z)({icon:D.Z},s));return(0,_.createElement)(_.Fragment,null,(0,_.createElement)("div",{className:"components-panel__header interface-complementary-area-header__small"},t&&(0,_.createElement)("span",{className:"interface-complementary-area-header__small-title"},t),i),(0,_.createElement)("div",{className:m()("components-panel__header","interface-complementary-area-header",r),tabIndex:-1},n,i))},ue=n(68629),me=n(4906);function pe(e){let{name:t,as:n=x.Z,onClick:r,...s}=e;return(0,_.createElement)(h.de,{name:t},(e=>{let{onClick:t}=e;return(0,_.createElement)(n,(0,b.Z)({onClick:r||t?function(){(r||N.noop)(...arguments),(t||N.noop)(...arguments)}:void 0},s))}))}pe.Slot=function(e){let{name:t,as:n=me.Z,fillProps:r={},bubblesVirtually:s,...i}=e;return(0,_.createElement)(h.g7,{name:t,bubblesVirtually:s,fillProps:r},(e=>{if((0,N.isEmpty)(_.Children.toArray(e)))return null;const t=[];_.Children.forEach(e,(e=>{let{props:{__unstableExplicitMenuItem:n,__unstableTarget:r}}=e;r&&n&&t.push(r)}));const r=_.Children.map(e,(e=>!e.props.__unstableExplicitMenuItem&&t.includes(e.props.__unstableTarget)?null:e));return(0,_.createElement)(n,i,r)}))};var fe=pe;const he=e=>(0,_.createElement)(ue.Z,(0,N.omit)(e,["__unstableExplicitMenuItem","__unstableTarget"]));function ve(e){let{scope:t,target:n,__unstableExplicitMenuItem:r,...s}=e;return(0,_.createElement)(ce,(0,b.Z)({as:e=>(0,_.createElement)(fe,(0,b.Z)({__unstableExplicitMenuItem:r,__unstableTarget:`${t}/${n}`,as:he,name:`${t}/plugin-more-menu`},e)),role:"menuitemcheckbox",selectedIcon:y.Z,name:n,scope:t},s))}function ge(e){let{scope:t,...n}=e;return(0,_.createElement)(h.de,(0,b.Z)({name:`PinnedItems/${t}`},n))}ge.Slot=function(e){let{scope:t,className:n,...r}=e;return(0,_.createElement)(h.g7,(0,b.Z)({name:`PinnedItems/${t}`},r),(e=>!(0,N.isEmpty)(e)&&(0,_.createElement)("div",{className:m()(n,"interface-pinned-items")},e)))};var be=ge;function _e(e){let{scope:t,children:n,className:r}=e;return(0,_.createElement)(h.de,{name:`ComplementaryArea/${t}`},(0,_.createElement)("div",{className:r},n))}const xe=le((function(e){let{children:t,className:n,closeLabel:r=(0,j.__)("Close plugin"),identifier:s,header:i,headerClassName:a,icon:o,isPinnable:l=!0,panelClassName:c,scope:d,name:u,smallScreenTitle:p,title:f,toggleShortcut:h,isActiveByDefault:v,showIconLabels:b=!1}=e;const{isActive:S,isPinned:N,activeArea:Z,isSmall:A,isLarge:I}=(0,g.Z)((e=>{const{getActiveComplementaryArea:t,isItemPinned:n}=e(re),r=t(d);return{isActive:r===s,isPinned:n(d,s),activeArea:r,isSmall:e(M).isViewportMatch("< medium"),isLarge:e(M).isViewportMatch("large")}}),[s,d]);!function(e,t,n,r,s){const i=(0,_.useRef)(!1),a=(0,_.useRef)(!1),{enableComplementaryArea:o,disableComplementaryArea:l}=(0,E.Z)(re);(0,_.useEffect)((()=>{r&&s&&!i.current?(l(e),a.current=!0):a.current&&!s&&i.current?(a.current=!1,o(e,t)):a.current&&n&&n!==t&&(a.current=!1),s!==i.current&&(i.current=s)}),[r,s,e,t,n])}(d,s,Z,S,A);const{enableComplementaryArea:L,disableComplementaryArea:D,pinItem:P,unpinItem:F}=(0,E.Z)(re);return(0,_.useEffect)((()=>{v&&void 0===Z&&!A&&L(d,s)}),[Z,v,d,s,A]),(0,_.createElement)(_.Fragment,null,l&&(0,_.createElement)(be,{scope:d},N&&(0,_.createElement)(ce,{scope:d,identifier:s,isPressed:S&&(!b||I),"aria-expanded":S,label:f,icon:b?y.Z:o,showTooltip:!b,variant:b?"tertiary":void 0})),u&&l&&(0,_.createElement)(ve,{target:u,scope:d,icon:o},f),S&&(0,_.createElement)(_e,{className:m()("interface-complementary-area",n),scope:d},(0,_.createElement)(de,{className:a,closeLabel:r,onClose:()=>D(d),smallScreenTitle:p,toggleButtonProps:{label:r,shortcut:h,scope:d,identifier:s}},i||(0,_.createElement)(_.Fragment,null,(0,_.createElement)("strong",null,f),l&&(0,_.createElement)(x.Z,{className:"interface-complementary-area__pin-unpin-item",icon:N?C:k,label:N?(0,j.__)("Unpin from toolbar"):(0,j.__)("Pin to toolbar"),onClick:()=>(N?F:P)(d,s),isPressed:N,"aria-expanded":N}))),(0,_.createElement)(w.Z,{className:c},t)))}));xe.Slot=function(e){let{scope:t,...n}=e;return(0,_.createElement)(h.g7,(0,b.Z)({name:`ComplementaryArea/${t}`},n))};var we=xe,Ee=e=>{let{isActive:t}=e;return(0,_.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,_.useEffect)((()=>(t?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{t&&document.body.classList.remove("is-fullscreen-mode")})),[t]),null},je=n(23120),ye=n(73404),Se=n(5560);const Ce={previous:[{modifier:"ctrlShift",character:"`"},{modifier:"access",character:"p"}],next:[{modifier:"ctrl",character:"`"},{modifier:"access",character:"n"}]};function ke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce;const t=(0,_.useRef)(),[n,r]=(0,_.useState)(!1);function s(e){const n=Array.from(t.current.querySelectorAll('[role="region"]'));if(!n.length)return;let s=n[0];const i=n.indexOf(t.current.ownerDocument.activeElement);if(-1!==i){let t=i+e;t=-1===t?n.length-1:t,t=t===n.length?0:t,s=n[t]}s.focus(),r(!0)}const i=(0,je.Z)((e=>{function t(){r(!1)}return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}}),[r]);return{ref:(0,ye.Z)([t,i]),className:n?"is-focusing-regions":"",onKeyDown(t){e.previous.some((e=>{let{modifier:n,character:r}=e;return Se.vd[n](t,r)}))?s(-1):e.next.some((e=>{let{modifier:n,character:r}=e;return Se.vd[n](t,r)}))&&s(1)}}}(0,se.Z)((e=>t=>{let{shortcuts:n,...r}=t;return(0,_.createElement)("div",ke(n),(0,_.createElement)(e,r))}),"navigateRegions");var Ne=(0,_.forwardRef)((function(e,t){let{footer:n,header:r,sidebar:s,secondarySidebar:i,notices:a,content:o,drawer:l,actions:c,labels:d,className:u,shortcuts:p}=e;const f=ke(p);!function(e){(0,_.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const h={drawer:(0,j.__)("Drawer"),header:(0,j.__)("Header"),body:(0,j.__)("Content"),secondarySidebar:(0,j.__)("Block Library"),sidebar:(0,j.__)("Settings"),actions:(0,j.__)("Publish"),footer:(0,j.__)("Footer"),...d};return(0,_.createElement)("div",(0,b.Z)({},f,{ref:(0,ye.Z)([t,f.ref]),className:m()(u,"interface-interface-skeleton",f.className,!!n&&"has-footer")}),!!l&&(0,_.createElement)("div",{className:"interface-interface-skeleton__drawer",role:"region","aria-label":h.drawer,tabIndex:"-1"},l),(0,_.createElement)("div",{className:"interface-interface-skeleton__editor"},!!r&&(0,_.createElement)("div",{className:"interface-interface-skeleton__header",role:"region","aria-label":h.header,tabIndex:"-1"},r),(0,_.createElement)("div",{className:"interface-interface-skeleton__body"},!!i&&(0,_.createElement)("div",{className:"interface-interface-skeleton__secondary-sidebar",role:"region","aria-label":h.secondarySidebar,tabIndex:"-1"},i),!!a&&(0,_.createElement)("div",{className:"interface-interface-skeleton__notices"},a),(0,_.createElement)("div",{className:"interface-interface-skeleton__content",role:"region","aria-label":h.body,tabIndex:"-1"},o),!!s&&(0,_.createElement)("div",{className:"interface-interface-skeleton__sidebar",role:"region","aria-label":h.sidebar,tabIndex:"-1"},s),!!c&&(0,_.createElement)("div",{className:"interface-interface-skeleton__actions",role:"region","aria-label":h.actions,tabIndex:"-1"},c))),!!n&&(0,_.createElement)("div",{className:"interface-interface-skeleton__footer",role:"region","aria-label":h.footer,tabIndex:"-1"},n))})),Ze=n(58689),Ae=n(83279);function Ie(e){let{as:t=Ze.Z,className:n,label:r=(0,j.__)("Options"),popoverProps:s,toggleProps:i,children:a}=e;return(0,_.createElement)(t,{className:m()("interface-more-menu-dropdown",n),icon:Ae.Z,label:r,popoverProps:{position:"bottom left",...s,className:m()("interface-more-menu-dropdown__content",null==s?void 0:s.className)},toggleProps:{tooltipPosition:"bottom",...i}},(e=>a(e)))}var Le=n(8880),Me=n(29301),De=n(27946),Pe=(0,_.createElement)(S.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,_.createElement)(S.y$,{d:"M20 10c0-5.51-4.49-10-10-10C4.48 0 0 4.49 0 10c0 5.52 4.48 10 10 10 5.51 0 10-4.48 10-10zM7.78 15.37L4.37 6.22c.55-.02 1.17-.08 1.17-.08.5-.06.44-1.13-.06-1.11 0 0-1.45.11-2.37.11-.18 0-.37 0-.58-.01C4.12 2.69 6.87 1.11 10 1.11c2.33 0 4.45.87 6.05 2.34-.68-.11-1.65.39-1.65 1.58 0 .74.45 1.36.9 2.1.35.61.55 1.36.55 2.46 0 1.49-1.4 5-1.4 5l-3.03-8.37c.54-.02.82-.17.82-.17.5-.05.44-1.25-.06-1.22 0 0-1.44.12-2.38.12-.87 0-2.33-.12-2.33-.12-.5-.03-.56 1.2-.06 1.22l.92.08 1.26 3.41zM17.41 10c.24-.64.74-1.87.43-4.25.7 1.29 1.05 2.71 1.05 4.25 0 3.29-1.73 6.24-4.4 7.78.97-2.59 1.94-5.2 2.92-7.78zM6.1 18.09C3.12 16.65 1.11 13.53 1.11 10c0-1.3.23-2.48.72-3.59C3.25 10.3 4.67 14.2 6.1 18.09zm4.03-6.63l2.58 6.98c-.86.29-1.76.45-2.71.45-.79 0-1.57-.11-2.29-.33.81-2.38 1.62-4.74 2.42-7.1z"})),Fe=n(4969),Re=n(95117);const Te="mailpoet/automation-editor",ze="mailpoet/automation-editor/workflow",Oe="mailpoet/automation-editor/step",Ve=e=>t=>{let{registry:n}=t;return n.dispatch(re).enableComplementaryArea(Te,e)},Be=()=>e=>{let{registry:t}=e;return t.dispatch(re).disableComplementaryArea(Te)},He=e=>t=>{let{registry:n}=t;return n.dispatch(W).toggle(Te,e)};function $e(){return{type:"TOGGLE_INSERTER_SIDEBAR"}}function We(e){return{type:"SET_INSERTER_POPOVER_ANCHOR",anchor:e}}function Ue(e){return{type:"SET_SELECTED_STEP",value:e}}var Ke=(0,_.createElement)(S.Wj,{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,_.createElement)(S.y$,{d:"M12.5939 21C14.1472 21 16.1269 20.5701 17.0711 20.1975L16.6447 18.879C16.0964 19.051 14.3299 19.6242 12.6548 19.6242C7.4467 19.6242 4.67513 16.8726 4.67513 12C4.67513 7.21338 7.50762 4.34713 12.2893 4.34713C17.132 4.34713 19.4162 7.55732 19.4162 10.7675C19.4162 14.035 19.0508 15.4968 17.4975 15.4968C16.5838 15.4968 16.0964 14.7803 16.0964 13.9777V7.5H14.4822V8.30255H14.3909C14.1777 7.67198 12.9898 7.12739 11.467 7.2707C9.18274 7.5 7.4467 9.27707 7.4467 11.8567C7.4467 14.5796 8.81726 16.672 11.467 16.758C13.203 16.8153 14.1168 16.0127 14.4822 15.1815H14.5736C14.7563 16.414 16.401 16.8439 17.467 16.8439C20.6954 16.8439 21 13.5764 21 10.7962C21 6.86943 18.0761 3 12.3807 3C6.50254 3 3 6.3535 3 11.9427C3 17.7325 6.38071 21 12.5939 21ZM11.7107 15.2962C9.73096 15.2962 9.03046 13.6051 9.03046 11.7707C9.03046 10.1083 10.0355 8.67516 11.7716 8.67516C13.599 8.67516 14.5736 9.36306 14.5736 11.7707C14.5736 14.1497 13.7513 15.2962 11.7107 15.2962Z"})),Ge=(0,_.createElement)(S.Wj,{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,_.createElement)(S.y$,{d:"m6.249 11.065.44-.44h3.186l-1.5 1.5H7.31l-1.957 1.96A.792.792 0 0 1 4 13.524V5a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v1.5L12.5 8V5.5h-7v6.315l.749-.75ZM20 19.75H7v-1.5h13v1.5Zm0-12.653-8.967 9.064L8 17l.867-2.935L17.833 5 20 7.097Z"})),qe=n(41417),Ye=(0,_.createElement)(S.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_.createElement)(S.y$,{d:"M20.1 11.2l-6.7-6.7c-.1-.1-.3-.2-.5-.2H5c-.4-.1-.8.3-.8.7v7.8c0 .2.1.4.2.5l6.7 6.7c.2.2.5.4.7.5s.6.2.9.2c.3 0 .6-.1.9-.2.3-.1.5-.3.8-.5l5.6-5.6c.4-.4.7-1 .7-1.6.1-.6-.2-1.2-.6-1.6zM19 13.4L13.4 19c-.1.1-.2.1-.3.2-.2.1-.4.1-.6 0-.1 0-.2-.1-.3-.2l-6.5-6.5V5.8h6.8l6.5 6.5c.2.2.2.4.2.6 0 .1 0 .3-.2.5zM9 8c-.6 0-1 .4-1 1s.4 1 1 1 1-.4 1-1-.4-1-1-1z"})),Je=(0,_.createElement)(S.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_.createElement)(S.y$,{fillRule:"evenodd",d:"M7.25 16.437a6.5 6.5 0 1 1 9.5 0V16A2.75 2.75 0 0 0 14 13.25h-4A2.75 2.75 0 0 0 7.25 16v.437Zm1.5 1.193a6.47 6.47 0 0 0 3.25.87 6.47 6.47 0 0 0 3.25-.87V16c0-.69-.56-1.25-1.25-1.25h-4c-.69 0-1.25.56-1.25 1.25v1.63ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm10-2a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z",clipRule:"evenodd"})),Qe=(0,_.createElement)(S.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_.createElement)(S.y$,{d:"M5.5 12h1.75l-2.5 3-2.5-3H4a8 8 0 113.134 6.35l.907-1.194A6.5 6.5 0 105.5 12zm9.53 1.97l-2.28-2.28V8.5a.75.75 0 00-1.5 0V12a.747.747 0 00.218.529l1.282-.84-1.28.842 2.5 2.5a.75.75 0 101.06-1.061z"})),Xe=(0,_.createElement)(S.Wj,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,_.createElement)(S.y$,{d:"M9 11.8l6.1-4.5c.1.4.4.7.9.7h2c.6 0 1-.4 1-1V5c0-.6-.4-1-1-1h-2c-.6 0-1 .4-1 1v.4l-6.4 4.8c-.2-.1-.4-.2-.6-.2H6c-.6 0-1 .4-1 1v2c0 .6.4 1 1 1h2c.2 0 .4-.1.6-.2l6.4 4.8v.4c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-2c0-.6-.4-1-1-1h-2c-.5 0-.8.3-.9.7L9 12.2v-.4z"})),et=(0,_.createElement)(S.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_.createElement)(S.y$,{d:"M4 6v12c0 1.1.9 2 2 2h3v-1.5H6c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h3V4H6c-1.1 0-2 .9-2 2zm7.2 16h1.5V2h-1.5v20zM15 5.5h1.5V4H15v1.5zm3.5.5H20c0-1.1-.9-2-2-2v1.5c.3 0 .5.2.5.5zm0 10.5H20v-2h-1.5v2zm0-3.5H20v-2h-1.5v2zm-.5 5.5V20c1.1 0 2-.9 2-2h-1.5c0 .3-.2.5-.5.5zM15 20h1.5v-1.5H15V20zm3.5-10.5H20v-2h-1.5v2z"}));const tt=[{id:"mailpoet/automation-send-email",title:"Send email",icon:Ke,description:"Send an email.",isDisabled:!1},{id:"mailpoet/automation-update-contact",title:"Update contact",icon:Ge,description:"Update contact information.",isDisabled:!1},{id:"mailpoet/automation-webhook",title:"Webhook",icon:qe.Z,description:"Trigger a webhook.",isDisabled:!1},{id:"mailpoet/automation-tag-untag",title:"Tag/Untag",icon:Ye,description:"Add or remove tag",isDisabled:!1},{id:"mailpoet/automation-unsubscribe",title:"Unsubscribe",icon:Je,description:"Unsubscribe MailPoet subscriber.",isDisabled:!1}],nt=[{id:"mailpoet/automation-delay",title:"Delay",icon:Qe,description:"Add a delay.",isDisabled:!1},{id:"mailpoet/automation-if-else",title:"If/Else",icon:Xe,description:"Execute a conditional statement.",isDisabled:!1},{id:"mailpoet/automation-a-b-test",title:"A/B split test",icon:et,description:"Run an A/B test.",isDisabled:!1}],rt={workflowData:{...window.mailpoet_automation_workflow},selectedStep:void 0,inserter:{actionSteps:tt,logicalSteps:nt},inserterSidebar:{isOpened:!1},inserterPopover:{anchor:void 0}},st=(0,X.M)((e=>(t,n)=>e(W).get(Te,n))),it=(0,X.M)((e=>()=>!!e(re).getActiveComplementaryArea(Te)));function at(e){return e.inserterSidebar.isOpened}function ot(e){return e.inserter.actionSteps}function lt(e){return e.inserter.logicalSteps}function ct(e){return e.inserterPopover.anchor}function dt(e){return e.workflowData}function ut(e){return e.selectedStep}const mt=(0,A.Z)(Te,{actions:c,selectors:d,reducer:function(e,t){switch(t.type){case"TOGGLE_INSERTER_SIDEBAR":return{...e,inserterSidebar:{...e.inserterSidebar,isOpened:!e.inserterSidebar.isOpened}};case"SET_INSERTER_POPOVER_ANCHOR":return{...e,inserterPopover:{...e.inserterPopover,anchor:t.anchor}};case"SET_SELECTED_STEP":return{...e,selectedStep:t.value};default:return e}},initialState:rt});(0,Z.z2)(mt);var pt=n(15451);function ft(){const{isInserterOpened:e,showIconLabels:t}=(0,g.Z)((e=>({isInserterOpened:e(mt).isInserterSidebarOpened(),showIconLabels:e(mt).isFeatureActive("showIconLabels")})),[]),{toggleInserterSidebar:n}=(0,E.Z)(mt);return(0,pt.jsx)(Fe.Z,{as:x.Z,className:"edit-post-header-toolbar__inserter-toggle",variant:"primary",isPressed:e,onMouseDown:e=>e.preventDefault(),onClick:n,icon:Re.Z,label:(0,j._x)("Toggle step inserter","Generic label for step inserter button"),showTooltip:!t,children:t&&(e?(0,j.__)("Close"):(0,j.__)("Add"))})}var ht=n(11748),vt=n(36042);function gt(e){let{scope:t,name:n,label:r,info:s,messageActivated:i,messageDeactivated:a,shortcut:o}=e;const l=(0,g.Z)((e=>!!e(W).get(t,n)),[n]),{toggle:c}=(0,E.Z)(W);return(0,_.createElement)(ue.Z,{icon:l&&y.Z,isSelected:l,onClick:()=>{c(t,n),(()=>{if(l){const e=a||(0,j.gB)((0,j.__)("Preference deactivated - %s"),r);(0,vt.D)(e)}else{const e=i||(0,j.gB)((0,j.__)("Preference activated - %s"),r);(0,vt.D)(e)}})()},role:"menuitemcheckbox",info:s,shortcut:o},r)}function bt(){return(0,pt.jsx)(Ie,{className:"edit-post-more-menu",popoverProps:{className:"edit-post-more-menu__content"},children:()=>(0,pt.jsx)(ht.Z,{label:(0,j._x)("View","noun"),children:(0,pt.jsx)(gt,{scope:Te,name:"fullscreenMode",label:(0,j.__)("Fullscreen mode"),info:(0,j.__)("Work without distraction"),messageActivated:(0,j.__)("Fullscreen mode activated"),messageDeactivated:(0,j.__)("Fullscreen mode deactivated"),shortcut:Se.E_.secondary("f")})})})}function _t(){const{isFullscreenActive:e}=(0,g.Z)((e=>({isFullscreenActive:e(mt).isFeatureActive("fullscreenMode")})),[]);return(0,pt.jsxs)("div",{className:"edit-post-header",children:[e&&(0,pt.jsx)(x.Z,{className:"edit-post-fullscreen-mode-close has-icon",href:"admin.php?page=mailpoet-automation",children:(0,pt.jsx)(Me.Z,{size:36,icon:Pe})}),(0,pt.jsx)("div",{className:"edit-post-header__toolbar",children:(0,pt.jsx)(De.Z,{className:"edit-post-header-toolbar",orientation:"horizontal",role:"toolbar",children:(0,pt.jsx)("div",{className:"edit-post-header-toolbar__left",children:(0,pt.jsx)(ft,{})})})}),(0,pt.jsxs)("div",{className:"edit-post-header__settings",children:[(0,pt.jsx)(x.Z,{isTertiary:!0,children:"Save Draft"}),(0,pt.jsx)(x.Z,{isPrimary:!0,className:"editor-post-publish-button",children:"Publish"}),(0,pt.jsx)(be.Slot,{scope:Te}),(0,pt.jsx)(bt,{})]})]})}var xt=n(35646),wt=n(11984),Et=n(23510);function jt(e){let{icon:t}=e;return(0,pt.jsx)("span",{className:"block-editor-block-icon",children:t})}function yt(e){let{item:t}=e;const{title:n,icon:r,description:s}=t;return(0,pt.jsx)("div",{className:"block-editor-inserter__preview-container",children:(0,pt.jsxs)("div",{className:"block-editor-block-card",children:[(0,pt.jsx)(jt,{icon:r}),(0,pt.jsxs)("div",{className:"block-editor-block-card__content",children:[(0,pt.jsx)("h2",{className:"block-editor-block-card__title",children:n}),(0,pt.jsx)("span",{className:"block-editor-block-card__description",children:s})]})]})})}var St=n(26899);const Ct=(0,_.createContext)(void 0),kt=(0,_.forwardRef)(((e,t)=>{let{isFirst:n,children:r,...s}=e;const i=(0,_.useContext)(Ct);return(0,pt.jsx)(St.A,{ref:t,state:i,role:"option",focusable:!0,...s,children:e=>{const t={...e,tabIndex:n?0:e.tabIndex};return(0,pt.jsx)(x.Z,{...t,children:r})}})})),Nt=()=>{const{platform:e}=window.navigator;return-1!==e.indexOf("Mac")||["iPad","iPhone"].includes(e)},Zt=(0,_.memo)((e=>{let{className:t,isFirst:n,item:r,onSelect:s,onHover:i,isDraggable:a,...o}=e;const l=(0,_.useRef)(!1);return(0,pt.jsx)("div",{className:"block-editor-block-types-list__list-item",children:(0,pt.jsxs)(kt,{isFirst:n,className:m()("block-editor-block-types-list__item",t),disabled:r.isDisabled,onClick:e=>{e.preventDefault(),s(r,Nt()?e.metaKey:e.ctrlKey),i(null)},onKeyDown:e=>{const{keyCode:t}=e;t===Se.K5&&(e.preventDefault(),s(r,Nt()?e.metaKey:e.ctrlKey),i(null))},onFocus:()=>{l.current||i(r)},onMouseEnter:()=>{l.current||i(r)},onMouseLeave:()=>i(null),onBlur:()=>i(null),...o,children:[(0,pt.jsx)("span",{className:"block-editor-block-types-list__item-icon",children:(0,pt.jsx)(jt,{icon:r.icon})}),(0,pt.jsx)("span",{className:"block-editor-block-types-list__item-title",children:r.title})]})})})),At=(0,_.forwardRef)(((e,t)=>{const[n,r]=(0,_.useState)(!1);return(0,_.useEffect)((()=>{n&&(0,vt.D)((0,j.__)("Use left and right arrow keys to move through blocks"))}),[n]),(0,pt.jsx)("div",{ref:t,role:"listbox","aria-orientation":"horizontal",onFocus:()=>{r(!0)},onBlur:e=>{!e.currentTarget.contains(e.relatedTarget)&&r(!1)},...e})}));var It=n(53808);const Lt=(0,_.forwardRef)(((e,t)=>{const n=(0,_.useContext)(Ct);return(0,pt.jsx)(It.E,{state:n,role:"presentation",ref:t,...e})})),Mt=(e,t)=>{const n=[];for(let r=0,s=e.length;r<s;r+=t)n.push(e.slice(r,r+t));return n};function Dt(e){let{items:t,onSelect:n,onHover:r,label:s,isDraggable:i=!0,children:a}=e;return(0,pt.jsxs)(At,{className:"block-editor-block-types-list","aria-label":s,children:[Mt(t,3).map(((e,t)=>(0,pt.jsx)(Lt,{children:e.map(((e,s)=>{return(0,pt.jsx)(Zt,{item:e,className:(a=e.id,`editor-block-list-item-${a.replace(/\//,"-")}`),onSelect:n,onHover:r,isDraggable:i,isFirst:0===t&&0===s},e.id);var a}))},t))),a]})}var Pt=n(70277);function Ft(e){let{children:t}=e;const n=(0,Pt.u)({shift:!0,wrap:"horizontal"});return(0,pt.jsx)(Ct.Provider,{value:n,children:t})}const Rt=(e,t)=>t.filter((t=>t.title.toLowerCase().includes(e.trim().toLowerCase()))),Tt=(0,_.forwardRef)(((e,t)=>{const[n,r]=(0,_.useState)(""),[s,i]=(0,_.useState)(null),{actionSteps:a,logicalSteps:o}=(0,g.Z)((e=>({actionSteps:e(mt).getInserterActionSteps(),logicalSteps:e(mt).getInserterLogicalSteps()})),[]),l=(0,_.useCallback)((e=>{i(e)}),[i]),c=(0,_.useRef)();(0,_.useImperativeHandle)(t,(()=>({focusSearch:()=>{var e;null===(e=c.current)||void 0===e||e.focus()}})));const d=(0,_.useMemo)((()=>Rt(n,a)),[a,n]),u=(0,_.useMemo)((()=>Rt(n,o)),[n,o]);return(0,pt.jsxs)("div",{className:"block-editor-inserter__menu",children:[(0,pt.jsx)("div",{className:"block-editor-inserter__main-area",children:(0,pt.jsxs)("div",{className:"block-editor-inserter__content",children:[(0,pt.jsx)(xt.Z,{className:"block-editor-inserter__search",onChange:e=>{s&&i(null),r(e)},value:n,label:(0,j.__)("Search for blocks and patterns"),placeholder:(0,j.__)("Search"),ref:c}),(0,pt.jsx)("div",{className:"block-editor-inserter__block-list",children:(0,pt.jsxs)(Ft,{children:[d.length>0&&(0,pt.jsxs)(pt.Fragment,{children:[(0,pt.jsx)("div",{className:"block-editor-inserter__panel-header",children:(0,pt.jsx)("h2",{className:"block-editor-inserter__panel-title",children:(0,pt.jsx)("div",{children:"Actions"})})}),(0,pt.jsx)("div",{className:"block-editor-inserter__panel-content",children:(0,pt.jsx)(Dt,{items:d,onHover:l,onSelect:()=>{},label:"A"})})]}),u.length>0&&(0,pt.jsxs)(pt.Fragment,{children:[(0,pt.jsx)("div",{className:"block-editor-inserter__panel-header",children:(0,pt.jsx)("h2",{className:"block-editor-inserter__panel-title",children:(0,pt.jsx)("div",{children:"Logical"})})}),(0,pt.jsx)("div",{className:"block-editor-inserter__panel-content",children:(0,pt.jsx)(Dt,{items:u,onHover:l,onSelect:()=>{},label:"B"})})]}),0===d.length&&0===u.length&&(0,pt.jsxs)("div",{className:"block-editor-inserter__no-results",children:[(0,pt.jsx)(wt.Z,{className:"block-editor-inserter__no-results-icon",icon:Et.Z}),(0,pt.jsx)("p",{children:(0,j.__)("No results found.")})]})]})})]})}),s&&(0,pt.jsx)(yt,{item:s})]})}));function zt(){return(0,pt.jsx)("div",{className:"edit-post-editor__inserter-panel",children:(0,pt.jsx)("div",{className:"edit-post-editor__inserter-panel-content",children:(0,pt.jsx)(Tt,{})})})}function Ot(){const{isSidebarOpened:e,selectedStep:t}=(0,g.Z)((e=>({isSidebarOpened:e(mt).isSidebarOpened,selectedStep:e(mt).getSelectedStep}))),{openSidebar:n,closeSidebar:r,toggleFeature:s}=(0,E.Z)(mt),{registerShortcut:i}=(0,E.Z)(Le.h);return(0,_.useEffect)((()=>{i({name:"core/edit-post/toggle-fullscreen",category:"global",description:(0,j.__)("Toggle fullscreen mode."),keyCombination:{modifier:"secondary",character:"f"}}),i({name:"core/edit-post/toggle-sidebar",category:"global",description:(0,j.__)("Show or hide the settings sidebar."),keyCombination:{modifier:"primaryShift",character:","}})}),[i]),(0,Le.bx)("core/edit-post/toggle-fullscreen",(()=>{s("fullscreenMode")})),(0,Le.bx)("core/edit-post/toggle-sidebar",(s=>{if(s.preventDefault(),e())r();else{const e=t()?Oe:ze;n(e)}})),null}var Vt=n(64776),Bt=(0,_.createElement)(S.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,_.createElement)(S.y$,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"}));function Ht(e){let{sidebarKey:t}=e;const{openSidebar:n}=(0,E.Z)(mt),[r,s]=t===ze?["Workflow (selected)","is-active"]:["Workflow",""],[i,a]=t===Oe?["Step (selected)","is-active"]:["Step",""];return(0,pt.jsxs)("ul",{children:[(0,pt.jsx)("li",{children:(0,pt.jsx)(x.Z,{onClick:()=>n(ze),className:`edit-post-sidebar__panel-tab ${s}`,"aria-label":r,"data-label":"Workflow",children:"Workflow"})}),(0,pt.jsx)("li",{children:(0,pt.jsx)(x.Z,{onClick:()=>n(Oe),className:`edit-post-sidebar__panel-tab ${a}`,"aria-label":i,"data-label":"Workflow",children:"Step"})})]})}var $t=n(79508);function Wt(){const{selectedStep:e}=(0,g.Z)((e=>({selectedStep:e(mt).getSelectedStep()})),[]);return e?(0,pt.jsxs)($t.Z,{children:[(0,pt.jsxs)("div",{children:[(0,pt.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,pt.jsxs)("div",{children:[(0,pt.jsx)("strong",{children:"Type:"})," ",e.type]}),(0,pt.jsxs)("div",{children:[(0,pt.jsx)("strong",{children:"Key:"})," ",e.key]}),(0,pt.jsxs)("div",{children:[(0,pt.jsx)("strong",{children:"Args:"})," ",JSON.stringify(e.args)]})]}):(0,pt.jsx)($t.Z,{children:"No step selected."})}function Ut(){const{workflowData:e}=(0,g.Z)((e=>({workflowData:e(mt).getWorkflowData()})),[]);return(0,pt.jsxs)($t.Z,{children:[(0,pt.jsx)("div",{children:(0,pt.jsx)("strong",{children:e.name})}),(0,pt.jsx)("br",{}),(0,pt.jsxs)("div",{children:[(0,pt.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,pt.jsxs)("div",{children:[(0,pt.jsx)("strong",{children:"Status:"})," ",e.status]}),(0,pt.jsxs)("div",{children:[(0,pt.jsx)("strong",{children:"Created:"})," ",new Date(Date.parse(e.created_at)).toLocaleString()]}),(0,pt.jsxs)("div",{children:[(0,pt.jsx)("strong",{children:"Updated:"})," ",new Date(Date.parse(e.updated_at)).toLocaleString()]})]})}const Kt=Vt.Z.select({web:!0,native:!1});function Gt(e){const{keyboardShortcut:t,sidebarKey:n,showIconLabels:r,workflowName:s}=(0,g.Z)((e=>{var t;return{keyboardShortcut:e(Le.h).getShortcutRepresentation("core/edit-post/toggle-sidebar"),sidebarKey:null!==(t=e(re).getActiveComplementaryArea(Te))&&void 0!==t?t:ze,showIconLabels:e(mt).isFeatureActive("showIconLabels"),workflowName:e(mt).getWorkflowData().name}}),[]);return(0,pt.jsxs)(we,{identifier:n,header:(0,pt.jsx)(Ht,{sidebarKey:n}),closeLabel:(0,j.__)("Close settings"),headerClassName:"edit-post-sidebar__panel-tabs",title:(0,j.__)("Settings"),icon:Bt,className:"edit-post-sidebar",panelClassName:"edit-post-sidebar",smallScreenTitle:s||(0,j.__)("(no title)"),scope:Te,toggleShortcut:t,isActiveByDefault:Kt,showIconLabels:r,...e,children:[n===ze&&(0,pt.jsx)(Ut,{}),n===Oe&&(0,pt.jsx)(Wt,{})]})}var qt=n(14523);const Yt=(0,_.createContext)(void 0);function Jt(){return(0,pt.jsx)("div",{className:"mailpoet-automation-editor-empty-workflow",children:"No workflow data."})}function Qt(e){let{onClick:t}=e;const n=(0,_.useContext)(Yt);return(0,pt.jsx)(St.A,{state:n,role:"treeitem",className:"mailpoet-automation-editor-add-step-button",focusable:!0,onClick:e=>{e.stopPropagation();const n=e.target.closest("button");t(n)},children:(0,pt.jsx)(wt.Z,{icon:Re.Z,size:16})})}function Xt(){const{setInserterPopoverAnchor:e}=(0,Z.WI)(mt);return(0,pt.jsx)("div",{className:"mailpoet-automation-editor-separator",children:(0,pt.jsx)(Qt,{onClick:t=>e(t)})})}var en=n(57589);function tn(){return(0,pt.jsxs)("svg",{width:"41",height:"41",viewBox:"0 0 41 41",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,pt.jsx)("path",{d:"M0.796875 20.5C0.796875 9.45431 9.75118 0.5 20.7969 0.5C31.8426 0.5 40.7969 9.45431 40.7969 20.5C40.7969 31.5457 31.8426 40.5 20.7969 40.5C9.75118 40.5 0.796875 31.5457 0.796875 20.5Z",fill:"#F7EDF7"}),(0,pt.jsx)("path",{d:"M20.7972 11.1665C15.6639 11.1665 11.4639 15.3665 11.4639 20.4998C11.4639 25.6332 15.6639 29.8332 20.7972 29.8332C25.9305 29.8332 30.1305 25.6332 30.1305 20.4998C30.1305 15.3665 25.9305 11.1665 20.7972 11.1665ZM20.7972 27.9665C16.6812 27.9665 13.3305 24.6158 13.3305 20.4998C13.3305 16.3838 16.6812 13.0332 20.7972 13.0332C24.9132 13.0332 28.2639 16.3838 28.2639 20.4998C28.2639 24.6158 24.9132 27.9665 20.7972 27.9665ZM21.2639 15.8332H19.8639V21.4332L24.7172 24.4198L25.4639 23.2065L21.2639 20.6865V15.8332Z",fill:"#7F54B3"})]})}function nn(){return(0,pt.jsxs)("svg",{width:"41",height:"41",viewBox:"0 0 41 41",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,pt.jsx)("path",{d:"M0.5 20.5C0.5 9.45431 9.45431 0.5 20.5 0.5C31.5457 0.5 40.5 9.45431 40.5 20.5C40.5 31.5457 31.5457 40.5 20.5 40.5C9.45431 40.5 0.5 31.5457 0.5 20.5Z",fill:"#FCF9E8"}),(0,pt.jsx)("path",{d:"M27.4998 14.375H13.4998C12.6944 14.375 12.0415 15.0279 12.0415 15.8333V25.1667C12.0415 25.9721 12.6944 26.625 13.4998 26.625H27.4998C28.3053 26.625 28.9582 25.9721 28.9582 25.1667V15.8333C28.9582 15.0279 28.3053 14.375 27.4998 14.375Z",stroke:"#996800",strokeWidth:"1.5"}),(0,pt.jsx)("path",{d:"M12.3335 14.6665L20.5002 21.6665L28.6668 14.6665",stroke:"#996800",strokeWidth:"1.5"})]})}function rn(){return(0,pt.jsxs)("svg",{width:"40",height:"41",viewBox:"0 0 40 41",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,pt.jsx)("path",{d:"M0 20.5C0 9.45431 8.95431 0.5 20 0.5C31.0457 0.5 40 9.45431 40 20.5C40 31.5457 31.0457 40.5 20 40.5C8.95431 40.5 0 31.5457 0 20.5Z",fill:"#F0F6FC"}),(0,pt.jsx)("path",{d:"M24.3163 12.5667L30.8496 19.1C31.6663 19.8 31.6663 21.2 30.7329 22.0167L24.1996 28.55C23.8496 28.9 23.2663 29.1333 22.7996 29.1333C22.3329 29.1333 21.7496 28.9 21.3996 28.55L14.8663 22.0167C14.0496 21.2 14.0496 19.9167 14.8663 19.1L21.3996 12.5667C22.2163 11.75 23.4996 11.75 24.3163 12.5667Z",fill:"#2271B1"}),(0,pt.jsx)("path",{d:"M17.6663 12.9167L10.3163 20.2667C10.1996 20.3833 10.1996 20.6167 10.4329 20.6167L17.7829 27.9667L16.4996 29.25L9.14961 22.0167C8.33294 21.2 8.33294 19.9167 9.14961 19.1L16.4996 11.75L17.6663 12.9167Z",fill:"#2271B1"})]})}function sn(e){return"trigger"===e.type?(0,pt.jsx)(rn,{}):"core:wait"===e.key?(0,pt.jsx)(tn,{}):"mailpoet:send-welcome-email"===e.key?(0,pt.jsx)(nn,{}):null}function an(e){return"trigger"===e.type?"Trigger":"core:wait"===e.key?"Delay":"mailpoet:send-welcome-email"===e.key?"Send welcome email":""}function on(e){return"mailpoet:segment:subscribed"===e.key?"Subscribed to segment":"core:wait"===e.key?`${e.args.seconds} seconds`:"mailpoet:send-welcome-email"===e.key?`Email ID: ${e.args.welcomeEmailId}`:e.key}function ln(e){let{step:t}=e;const{openSidebar:n,selectStep:r}=(0,E.Z)(mt),s=(0,_.useContext)(Yt),{batch:i}=(0,en.Z)();return(0,pt.jsxs)(St.A,{state:s,role:"treeitem",className:"mailpoet-automation-editor-step",focusable:!0,onClick:()=>i((()=>{n(Oe),r(t)})),children:[(0,pt.jsx)("div",{className:"mailpoet-automation-editor-step-icon",children:sn(t)}),(0,pt.jsxs)("div",{children:[(0,pt.jsx)("div",{className:"mailpoet-automation-editor-step-title",children:an(t)}),(0,pt.jsx)("div",{className:"mailpoet-automation-editor-step-subtitle",children:on(t)})]})]},t.id)}function cn(){const{inserterPopoverAnchor:e}=(0,g.Z)((e=>({inserterPopoverAnchor:e(mt).getInserterPopoverAnchor()})),[]),{setInserterPopoverAnchor:t}=(0,Z.WI)(mt);return e?(0,pt.jsx)(v.Z,{anchorRect:e.getBoundingClientRect(),onClose:()=>t(void 0),children:(0,pt.jsx)(Tt,{})}):null}function dn(){var e;const{workflowData:t}=(0,g.Z)((e=>({workflowData:e(mt).getWorkflowData()})),[]),n=(0,Pt.u)({orientation:"vertical",wrap:"horizontal",shift:!0}),r=null!==(e=null==t?void 0:t.steps)&&void 0!==e?e:void 0,s=(0,_.useMemo)((()=>Object.values(null!=r?r:{}).filter((e=>{let{type:t}=e;return"trigger"===t}))),[r]),i=(0,_.useMemo)((()=>{if(!r||s.length<1)return[];const e=[s[0]];for(;;){var t;const n=e[e.length-1];if(!("next_step_id"in n)||!n.next_step_id||null===(t=r[n.next_step_id])||void 0===t||!t)break;e.push(r[n.next_step_id])}return e}),[s,r]);return t?(0,pt.jsx)(Yt.Provider,{value:n,children:(0,pt.jsxs)(qt.b,{state:n,role:"tree","aria-orientation":"vertical",className:"mailpoet-automation-editor-workflow",children:[(0,pt.jsxs)("div",{className:"mailpoet-automation-editor-workflow-wrapper",children:[(0,pt.jsx)("div",{}),i.map(((e,t)=>(0,pt.jsxs)(_.Fragment,{children:[t>0&&(0,pt.jsx)(Xt,{}),(0,pt.jsx)(ln,{step:e},e.id)]},e.id))),(0,pt.jsx)("div",{})]}),(0,pt.jsx)(cn,{})]})}):(0,pt.jsx)(Jt,{})}function un(){const{isFullscreenActive:e,isInserterOpened:t,isSidebarOpened:n,showIconLabels:r}=(0,g.Z)((e=>({isFullscreenActive:e(mt).isFeatureActive("fullscreenMode"),isInserterOpened:e(mt).isInserterSidebarOpened(),isSidebarOpened:e(mt).isSidebarOpened(),showIconLabels:e(mt).isFeatureActive("showIconLabels")})),[]),s=m()("edit-post-layout","interface-interface-skeleton",{"is-sidebar-opened":n,"show-icon-labels":r});return(0,pt.jsx)(Le.vn,{children:(0,pt.jsxs)(h.zt,{children:[(0,pt.jsx)(Ee,{isActive:e}),(0,pt.jsx)(Ot,{}),(0,pt.jsx)(Gt,{}),(0,pt.jsx)(Ne,{className:s,header:(0,pt.jsx)(_t,{}),content:(0,pt.jsx)(dn,{}),sidebar:(0,pt.jsx)(we.Slot,{scope:Te}),secondarySidebar:t?(0,pt.jsx)(zt,{}):null}),(0,pt.jsx)(v.Z.Slot,{})]})})}window.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("mailpoet_automation_editor");e&&f().render((0,pt.jsx)(un,{}),e)}))}},function(e){e.O(0,[351],(function(){return 77515,e(e.s=77515)})),e.O()}]);